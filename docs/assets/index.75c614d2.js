var yt=Object.defineProperty,mt=Object.defineProperties;var vt=Object.getOwnPropertyDescriptors;var We=Object.getOwnPropertySymbols;var xt=Object.prototype.hasOwnProperty,_t=Object.prototype.propertyIsEnumerable;var Fe=(a,n,r)=>n in a?yt(a,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[n]=r,T=(a,n)=>{for(var r in n||(n={}))xt.call(n,r)&&Fe(a,r,n[r]);if(We)for(var r of We(n))_t.call(n,r)&&Fe(a,r,n[r]);return a},Ye=(a,n)=>mt(a,vt(n));import{c as $e,a as wt,r as h,b as P,t as pe,o as de,d as De,e as R,f as K,w as s,g as t,u as e,L as u,C as he,O as we,D as kt,V as Xe,E as bt,h as G,i as Pe,I as Se,F as ne,G as B,j as zt,B as y,k as ge,l as Ue,P as Ke,m as ue,n as Mt,p as Te,Q as Rt,A as Lt,H as Ct,q as Et,S as At,T as qe,R as It,s as ee,v as Dt,x as Pt,y as St,z as Qe,J as Tt}from"./vendor.7a89feb7.js";const Ot=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))m(f);new MutationObserver(f=>{for(const l of f)if(l.type==="childList")for(const k of l.addedNodes)k.tagName==="LINK"&&k.rel==="modulepreload"&&m(k)}).observe(document,{childList:!0,subtree:!0});function r(f){const l={};return f.integrity&&(l.integrity=f.integrity),f.referrerpolicy&&(l.referrerPolicy=f.referrerpolicy),f.crossorigin==="use-credentials"?l.credentials="include":f.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function m(f){if(f.ep)return;f.ep=!0;const l=r(f);fetch(f.href,l)}};Ot();const Nt=()=>$e({id:"gameMachine",context:{score:0},initial:"seeding",states:{seeding:{on:{DONE:"playing",STOP:"stopped"}},playing:{on:{UPDATE_SCORE:{actions:["updateScore"]},STOP:"stopped",FINISHED:"finished"}},stopped:{type:"final"},finished:{type:"final"}}},{actions:{updateScore:wt((a,n)=>({score:a.score+n.value}))}}),Gt=()=>$e({id:"main",initial:"loading",states:{loading:{on:{IDLE:"idle"}},idle:{on:{START:"start"}},start:{invoke:{id:"gameMachine",src:Nt,onDone:"idle"}},end:{}}}),Ve=h(),Bt=P(()=>{var a;return(a=Ve.value)==null?void 0:a.renderer});function Oe(){return{rendererRef:Ve,renderer:Bt}}const Ze=h(),Ht=P(()=>{var a;return(a=Ze.value)==null?void 0:a.scene});function Wt(){return{sceneRef:Ze,scene:Ht}}const je=h(),Ft=P(()=>{var a;return(a=je.value)==null?void 0:a.camera});function Yt(){return{cameraRef:je,camera:Ft}}const _=(a,n,r,m,f,l=!0)=>{[[0,11,17],[1,9,20],[2,13,19],[3,15,22],[5,10,16],[4,8,21],[7,12,18],[6,14,23]][a].forEach(p=>{let w,C,b,c=n.value.geometry.attributes.position.getX(p),x=n.value.geometry.attributes.position.getY(p),I=n.value.geometry.attributes.position.getZ(p);l?(w=r?c+r:c,C=m?x+m:x,b=f?I+f:I):(w=r||c,C=m||x,b=f||I),n.value.geometry.attributes.position.setXYZ(p,w,C,b)}),n.value.geometry.attributes.position.needsUpdate=!0},$=(a,n,r)=>{const m=Math.round(Math.random()*(n*1e5-a*1e5)+a*1e5)/1e5;return r&&m>=r[0]&&m<=r[1]?$(a,n,r):m},X=(a,n)=>Math.round(Math.random()*(n-a)+a),Ne=(a,n,r)=>{const m=+a.replace("#","0x"),f=m>>16,l=m>>8&255,k=m&255,p=+n.replace("#","0x"),w=p>>16,C=p>>8&255,b=p&255,c=f+r*(w-f),x=l+r*(C-l),I=k+r*(b-k);return"#"+((1<<24)+(c<<16)+(x<<8)+I|0).toString(16).slice(1)},Je=h(!1);function Ge(a=!1){return{position:{type:Object,required:a,default:()=>({x:0,y:0})}}}function Be(){return{dark:{type:Boolean,default:!1}}}function He(){return{offsets:{type:Array,default:()=>[0,0,0,0]}}}const et={props:T(T(T({},Ge()),Be()),He()),setup(a){const n=a,{position:r,offsets:m}=pe(n),f=P(()=>({x:r.value.x*10,y:-.5,z:r.value.y*10})),l=h();return de(()=>{_(5,l,null,m.value[0]),_(1,l,null,m.value[1]),_(0,l,null,m.value[2]),_(4,l,null,m.value[3])}),(k,p)=>{const w=De("Box");return R(),K(w,{ref_key:"grass",ref:l,width:10,height:1,depth:10,position:e(f),"receive-shadow":""},{default:s(()=>[t(e(u),{color:k.dark?"#a8cf86":"#b6dd94"},null,8,["color"])]),_:1},8,["position"])}}};function tt(a=0){return{amount:{type:Number,default:a}}}function ot(){return{excludes:{type:Object,default:()=>({x:0,y:0})}}}const it={props:T(T({},tt()),ot()),setup(a){const n=a,{amount:r,excludes:m}=pe(n),f=h(),l=[new he("#919ba4"),new he("#b8b6a6"),new he("#acb7b5")];return de(()=>{const k=f.value.mesh,p=new we;for(let w=0;w<r.value;w++){const C=l[X(0,l.length-1)],b=$(.2,1),c=$(0,Math.PI*2),x=$(-4.5,4.5,m.value.x),I=$(-4.5,4.5,m.value.y);p.position.set(x,0,I),p.scale.set(b,b,b),p.rotation.set(c,c,c),p.updateMatrix(),k.setMatrixAt(w,p.matrix),k.setColorAt(w,C)}k.instanceMatrix.needsUpdate=!0}),(k,p)=>{const w=De("InstancedMesh");return R(),K(w,{ref_key:"rocks",ref:f,count:e(r),"receive-shadow":"","cast-shadow":""},{default:s(()=>[t(e(kt),{radius:.5},null,8,["radius"]),t(e(u))]),_:1},8,["count"])}}},nt={props:T(T({},tt()),ot()),setup(a){const n=a,{amount:r,excludes:m}=pe(n),f=h(),l=h(),k=h();return de(()=>{const p=f.value.mesh,w=l.value.mesh,C=k.value.mesh,b=new we,c=new we,x=new we,I=[new he("#9fcf88"),new he("#8bbb75"),new he("#cfc788"),new he("#cb906d")],N=new Xe(0,1,0);for(let E=0;E<r.value;E++){const z=$(1,3.5),F=$(-.1,.1),H=$(-.1,.1),ye=Math.random()>.5,fe=I[X(0,I.length-1)],q=$(-4.8,4.8,m.value.x),Y=$(-4.8,4.8,m.value.y),Q=new bt(F,H,0,"XYZ");b.setRotationFromEuler(Q),b.position.set(q,0,Y),b.translateOnAxis(N,.3*z),b.scale.set(.1*z,.6*z,.1*z),b.updateMatrix(),c.setRotationFromEuler(Q),c.position.set(q,0,Y),c.translateOnAxis(N,.5*z),c.scale.set(.15*z,.8*z,.15*z),c.updateMatrix(),ye&&(x.setRotationFromEuler(Q),x.position.set(q,0,Y),x.translateOnAxis(N,.8*z),x.scale.set(.1*z,.6*z,.1*z),x.updateMatrix(),C.setMatrixAt(E,x.matrix),C.setColorAt(E,fe)),p.setMatrixAt(E,b.matrix),w.setMatrixAt(E,c.matrix),w.setColorAt(E,fe)}p.instanceMatrix.needsUpdate=!0,w.instanceMatrix.needsUpdate=!0,C.instanceMatrix.needsUpdate=!0}),(p,w)=>(R(),G(ne,null,[t(e(Se),{ref_key:"bases",ref:f,count:e(r),"receive-shadow":"","cast-shadow":""},{default:s(()=>[t(e(Pe),{"radial-segments":4}),t(e(u),{color:"#c6966f"})]),_:1},8,["count"]),t(e(Se),{ref_key:"treesLow",ref:l,count:e(r),"receive-shadow":"","cast-shadow":""},{default:s(()=>[t(e(Pe),{"radial-segments":4}),t(e(u),{color:"#9fcf88"})]),_:1},8,["count"]),t(e(Se),{ref_key:"treesHigh",ref:k,count:e(r),"receive-shadow":"","cast-shadow":""},{default:s(()=>[t(e(Pe),{"radial-segments":4}),t(e(u),{color:"#9fcf88"})]),_:1},8,["count"])],64))}},st={props:T(T(T({},Ge()),He()),Be()),setup(a){const n=a,{position:r,offsets:m}=pe(n),f=P(()=>({x:r.value.x*10,y:0,z:r.value.y*10})),l=X(0,10),k=X(5,20);return(p,w)=>(R(),K(e(B),{position:e(f)},{default:s(()=>[t(et,{offsets:e(m),dark:p.dark},null,8,["offsets","dark"]),t(it,{amount:e(l)},null,8,["amount"]),t(nt,{amount:e(k)},null,8,["amount"])]),_:1},8,["position"]))}},rt="#ffffff",$t="#aaaaaa",Xt="#000000",at="#ff0000",Ut="#ff9002",Kt="#ffff00",qt="#00ff00",lt="#0000ff",Qt="#99684a";var M=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",WHITE:rt,GREY:$t,BLACK:Xt,RED:at,ORANGE:Ut,YELLOW:Kt,GREEN:qt,BLUE:lt,BROWN:Qt});function ct(a=0,n=!1){return{direction:{type:Number,default:a,required:n}}}const Vt={props:T({},ct(0,!0)),setup(a){const n=a,{direction:r}=pe(n),m=P(()=>-r.value*Math.PI/4),f=h([]),l=h([]),k=h([]),p=h([]);return h([]),zt(()=>{f.value=[],l.value=[],p.value=[],k.value=[]}),de(()=>{const{rendererRef:w}=Oe();let C=0;w.value.onBeforeRender(()=>{k.value.forEach((b,c)=>{(C+c*-10)%200>=0&&(C+c*-10)%200<10?(l.value[c].material.opacity=1,b.light.visible=!0):(l.value[c].material.opacity=.5,b.light.visible=!1)}),p.value.forEach((b,c)=>{(C+100+c*-10)%200>=0&&(C+100+c*-10)%200<10?(f.value[c].material.opacity=1,b.light.visible=!0):(f.value[c].material.opacity=.5,b.light.visible=!1)}),C++})}),(w,C)=>{const b=De("PointLight");return R(),K(e(B),{ref:"airfield",position:{x:0,y:.1,z:0},rotation:{x:0,y:e(m),z:0}},{default:s(()=>[t(e(y),{width:3,height:.1,depth:9,"receive-shadow":""},{default:s(()=>[t(e(u),{color:"#222222"})]),_:1},8,["height"]),t(it,{amount:10,excludes:{x:[-2,2]}}),t(nt,{amount:10,excludes:{x:[-2,2]}}),(R(),G(ne,null,ge(7,c=>t(e(y),{key:c,width:.2,height:.05,depth:.75,"receive-shadow":"",position:{x:0,y:.05,z:-4.6+c*1.15}},{default:s(()=>[t(e(u),{color:"#f7c654"})]),_:2},1032,["width","height","depth","position"])),64)),(R(),G(ne,null,ge(6,c=>t(e(y),{ref_for:!0,ref:x=>{x&&(f.value[c-1]=x)},width:.2,height:.2,depth:.2,position:{x:-1.4+c*.4,y:.05,z:-4.2}},{default:s(()=>[t(e(u),{color:"#ff0000",props:{transparent:!0,opacity:.85}},null,8,["props"])]),_:2},1032,["width","height","depth","position"])),64)),(R(),G(ne,null,ge(6,c=>t(b,{ref_for:!0,ref:x=>{x&&(p.value[c-1]=x)},position:{x:-1.4+c*.4,y:.05,z:-4.2},intensity:1,color:e(M).RED,distance:10},null,8,["position","color"])),64)),(R(),G(ne,null,ge(6,c=>t(e(y),{ref_for:!0,ref:x=>{x&&(l.value[c-1]=x)},width:.2,height:.2,depth:.2,position:{x:-1.4+c*.4,y:.05,z:4.2}},{default:s(()=>[t(e(u),{color:"#00ff00",props:{transparent:!0,opacity:.85}},null,8,["props"])]),_:2},1032,["width","height","depth","position"])),64)),(R(),G(ne,null,ge(6,c=>t(b,{ref_for:!0,ref:x=>{x&&(k.value[c-1]=x)},position:{x:-1.4+c*.4,y:.05,z:4.2},intensity:1,color:e(M).GREEN,distance:10},null,8,["position","color"])),64))]),_:1},8,["position","rotation"])}}},Zt={props:T(T(T(T({},Ge()),ct(0,!0)),He()),Be()),setup(a){const n=a,{position:r,direction:m}=pe(n),f=P(()=>({x:r.value.x*10,y:0,z:r.value.y*10}));return de(()=>{}),(l,k)=>(R(),K(e(B),{position:e(f),props:{name:"airport"}},{default:s(()=>[t(et,{offsets:l.offsets,dark:l.dark},null,8,["offsets","dark"]),t(Vt,{direction:e(m)},null,8,["direction"])]),_:1},8,["position"]))}},jt={props:{position:Object,altitude:{type:Number,default:0,required:!0},direction:{type:Number,default:0,required:!0},ghost:Boolean,selected:Boolean},emits:["select"],setup(a,{emit:n}){const r=a,{rendererRef:m}=Oe(),{altitude:f,direction:l,position:k,selected:p}=pe(r),w=P(()=>D.value?rt:p.value?lt:at),C=P(()=>f.value>0),b=P(()=>f.value*4+.8),c=P(()=>({x:k.value.x*10,y:b.value,z:k.value.y*10})),x=P(()=>C.value?0:.08),I=P(()=>l.value*Math.PI/-4),N=h(),E=h(),z=h(),F=h(),H=h(),ye=h(),fe=h(),q=h(),Y=h(),Q=h(),me=h(),re=h(),ve=h(),o=h(),Re=h(),W=h(),Le=h(),ke=h(),be=h(),S=h(),xe=h(),_e=h(),te=h(),V=h(),D=P(()=>k.value.x<-5||k.value.x>5||k.value.y<-5||k.value.y>5),v=()=>{D.value||n("select")};let ze;return de(()=>{var Ee;_(0,z,-.2,-.1),_(2,z,-.2,.3),_(4,z,.2,-.1),_(6,z,.2,.3),_(1,F,-.1,-.1),_(3,F,-.1,.1),_(5,F,.1,-.1),_(7,F,.1,.1),_(0,H,.07,.07),_(2,H,.07,-.07),_(4,H,-.07,.07),_(6,H,-.07,-.07),_(1,q,.2,.05),_(3,q,.2,-.05),_(5,q,-.2,.05),_(7,q,-.2,-.05),_(0,Y,-.04,.05),_(2,Y,-.04),_(3,Y,0,-.05),_(4,Y,.04,.05),_(6,Y,.04),_(7,Y,0,-.05),_(0,Q,-.05),_(1,Q,-.05),_(4,Q,.05),_(5,Q,.05),_(4,me,null,null,.01),_(1,re,null,null,-.009),_(5,re,null,null,-.009),_(7,re,null,null,-.01),_(2,ve,null,null,.01),_(1,o,null,null,-.005),_(3,o,null,null,-.01),_(7,o,null,null,-.005);let d=0;const Ce=ye.value.mesh,Ae=fe.value.mesh,Ie=Math.PI/2,ae=Re.value.mesh,le=W.value.mesh,ce=Le.value.mesh,Z=ke.value.mesh,U=be.value.mesh,j=S.value.mesh,oe=(se,J=0)=>(se+J)%100/100,O=(se,J=0)=>(se+J)/50,A=(se,J=0)=>Math.sin((se+J)%100/100*Math.PI);ze=()=>{ae.position.z=oe(d),ae.rotation.y=O(d),ae.rotation.z=O(d),ae.scale.x=A(d)*1.1,ae.scale.y=A(d)*1.1,ae.scale.z=A(d)*1.1,le.position.z=oe(d,15),le.rotation.y=O(d,15),le.rotation.z=O(d,15),le.scale.x=A(d,15)*1.5,le.scale.y=A(d,15)*1.5,le.scale.z=A(d,15)*1.5,ce.position.z=oe(d,35),ce.rotation.y=O(d,35),ce.rotation.z=O(d,35),ce.scale.x=A(d,35)*1.3,ce.scale.y=A(d,35)*1.3,ce.scale.z=A(d,35)*1.3,Z.position.z=oe(d,40),Z.rotation.y=O(d,40),Z.rotation.z=O(d,40),Z.scale.x=A(d,40)*1.2,Z.scale.y=A(d,40)*1.2,Z.scale.z=A(d,40)*1.2,U.position.z=oe(d,55),U.rotation.y=O(d,55),U.rotation.z=O(d,55),U.scale.x=A(d,55),U.scale.y=A(d,55),U.scale.z=A(d,55),j.position.z=oe(d,75),j.rotation.y=O(d,75),j.rotation.z=O(d,75),j.scale.x=A(d,75)*1.35,j.scale.y=A(d,75)*1.35,j.scale.z=A(d,75)*1.35;const se=Math.PI/2*(d/5),J=Math.sin(d/Math.PI/8)/5,Me=Math.sin(d/Math.PI/10)/10;Ce.rotation.z=se,Ae.rotation.z=se+Ie,E.value&&(E.value.o3d.position.y=C.value?J:0,E.value.o3d.rotation.z=C.value?Me:0),d%200==0?(xe.value.material.opacity=1,_e.value.light.visible=!0,te.value.material.opacity=1,V.value.light.visible=!0):d%200==10&&(xe.value.material.opacity=.5,_e.value.light.visible=!1,te.value.material.opacity=.5,V.value.light.visible=!1),d++},(Ee=m.value)==null||Ee.onBeforeRender(ze)}),Ue(()=>{var d;(d=m.value)==null||d.offBeforeRender(ze)}),(d,Ce)=>(R(),K(e(B),{ref_key:"airplane",ref:N,position:e(c),rotation:{x:e(x),y:e(I),z:0},props:{transparent:!0,opacity:.5}},{default:s(()=>[t(e(B),{ref_key:"animation",ref:E},{default:s(()=>[t(e(y),{onClick:v,ref_key:"hull",ref:z,width:1,height:1,depth:2,position:{x:0,y:0,z:0},"cast-shadow":""},{default:s(()=>[t(e(u),{color:e(w)},null,8,["color"])]),_:1},512),t(e(y),{onClick:v,ref_key:"screen",ref:Q,width:.7,height:.4,depth:.05,position:{x:0,y:.65,z:-.7},rotation:{x:.2,y:0,z:0}},{default:s(()=>[t(e(u),{color:"#e2eff4",props:{transparent:!0,opacity:.5}},null,8,["props"])]),_:1},8,["width","height","depth","position","rotation"]),t(e(y),{onClick:v,ref_key:"engine",ref:F,width:1,height:1,depth:.5,position:{x:0,y:0,z:-1.25},"cast-shadow":""},{default:s(()=>[t(e(u),{color:e(M).WHITE},null,8,["color"])]),_:1},8,["depth","position"]),t(e(B),{ref:"pipeRight",position:{x:0,y:.05,z:0},rotation:{x:-.05,y:0,z:0}},{default:s(()=>[t(e(y),{onClick:v,ref_key:"pipeRight1",ref:ve,width:.1,height:.1,depth:.5,position:{x:.5,y:.2,z:-1.05},rotation:{x:0,y:.2,z:Math.PI/4}},{default:s(()=>[t(e(u),{color:e(M).GREY},null,8,["color"])]),_:1},8,["width","height","depth","position","rotation"]),t(e(y),{onClick:v,ref_key:"pipeRight2",ref:o,width:.1,height:.1,depth:.5,position:{x:.55,y:.2,z:-.55},rotation:{x:0,y:0,z:Math.PI/4}},{default:s(()=>[t(e(u),{color:e(M).GREY},null,8,["color"])]),_:1},8,["width","height","depth","position","rotation"])]),_:1},8,["position","rotation"]),t(e(B),{ref:"smokeLeft",position:{x:0,y:0,z:-.25}},{default:s(()=>[t(e(y),{onClick:v,ref_key:"smokeLeft1",ref:ke,width:.1,height:.1,depth:.1,position:{x:-.55,y:.3,z:-.25}},{default:s(()=>[t(e(u),{color:e(M).WHITE},null,8,["color"])]),_:1},8,["width","height","depth","position"]),t(e(y),{onClick:v,ref_key:"smokeLeft2",ref:be,width:.1,height:.1,depth:.1,position:{x:-.55,y:.3,z:-.25}},{default:s(()=>[t(e(u),{color:e(M).WHITE},null,8,["color"])]),_:1},8,["width","height","depth","position"]),t(e(y),{onClick:v,ref_key:"smokeLeft3",ref:S,width:.1,height:.1,depth:.1,position:{x:-.55,y:.3,z:-.25}},{default:s(()=>[t(e(u),{color:e(M).WHITE},null,8,["color"])]),_:1},8,["width","height","depth","position"])]),_:1},8,["position"]),t(e(B),{ref:"smokeRight",position:{x:0,y:0,z:-.25}},{default:s(()=>[t(e(y),{onClick:v,ref_key:"smokeRight1",ref:Re,width:.1,height:.1,depth:.1,position:{x:.55,y:.3,z:-.25}},{default:s(()=>[t(e(u),{color:e(M).WHITE},null,8,["color"])]),_:1},8,["width","height","depth","position"]),t(e(y),{onClick:v,ref_key:"smokeRight2",ref:W,width:.1,height:.1,depth:.1,position:{x:.55,y:.3,z:-.25}},{default:s(()=>[t(e(u),{color:e(M).WHITE},null,8,["color"])]),_:1},8,["width","height","depth","position"]),t(e(y),{onClick:v,ref_key:"smokeRight3",ref:Le,width:.1,height:.1,depth:.1,position:{x:.55,y:.3,z:-.25}},{default:s(()=>[t(e(u),{color:e(M).WHITE},null,8,["color"])]),_:1},8,["width","height","depth","position"])]),_:1},8,["position"]),t(e(B),{ref:"pipeLeft",position:{x:0,y:.05,z:0},rotation:{x:-.05,y:0,z:0}},{default:s(()=>[t(e(y),{onClick:v,ref_key:"pipeLeft1",ref:me,width:.1,height:.1,depth:.5,position:{x:-.5,y:.2,z:-1.05},rotation:{x:0,y:-.2,z:Math.PI/4}},{default:s(()=>[t(e(u),{color:e(M).GREY},null,8,["color"])]),_:1},8,["width","height","depth","position","rotation"]),t(e(y),{onClick:v,ref_key:"pipeLeft2",ref:re,width:.1,height:.1,depth:.5,position:{x:-.55,y:.2,z:-.55},rotation:{x:0,y:0,z:Math.PI/4}},{default:s(()=>[t(e(u),{color:e(M).GREY},null,8,["color"])]),_:1},8,["width","height","depth","position","rotation"])]),_:1},8,["position","rotation"]),t(e(y),{onClick:v,ref_key:"nut",ref:H,width:.2,height:.2,depth:.3,position:{x:0,y:0,z:-1.55},"cast-shadow":""},{default:s(()=>[t(e(u),{color:e(M).BROWN},null,8,["color"])]),_:1},8,["width","height","depth","position"]),t(e(y),{onClick:v,ref_key:"prop1",ref:ye,width:.15,height:1.5,depth:.05,position:{x:0,y:0,z:-1.6},rotation:{x:0,y:0,z:Math.PI/4},"cast-shadow":""},{default:s(()=>[t(e(u),{color:e(M).BLACK},null,8,["color"])]),_:1},8,["width","height","depth","position","rotation"]),t(e(y),{onClick:v,ref_key:"prop2",ref:fe,width:.15,height:1.5,depth:.05,position:{x:0,y:0,z:-1.6},rotation:{x:0,y:0,z:-Math.PI/4}},{default:s(()=>[t(e(u),{color:e(M).BLACK},null,8,["color"])]),_:1},8,["width","height","depth","position","rotation"]),t(e(y),{onClick:v,ref_key:"wings",ref:q,width:3,height:.1,depth:1,position:{x:0,y:0,z:-.25},"cast-shadow":""},{default:s(()=>[t(e(u),{color:e(w)},null,8,["color"])]),_:1},8,["height","position"]),t(e(y),{onClick:v,ref_key:"rudder",ref:Y,width:.1,height:.75,depth:.5,position:{x:0,y:.5,z:.95},"cast-shadow":""},{default:s(()=>[t(e(u),{color:e(w)},null,8,["color"])]),_:1},8,["width","height","depth","position"]),t(e(B),{ref:"rightWheel",position:{x:-.3,y:0,z:-1.4}},{default:s(()=>[t(e(y),{onClick:v,ref:"rightWheel-base",width:.4,height:.5,depth:.6,position:{x:0,y:-.3,z:.75},"cast-shadow":""},{default:s(()=>[t(e(u),{color:e(w)},null,8,["color"])]),_:1},8,["width","height","depth","position"]),t(e(y),{onClick:v,ref:"rightWheel-nut",width:.34,height:.2,depth:.2,position:{x:0,y:-.6,z:.75},"cast-shadow":""},{default:s(()=>[t(e(u),{color:e(M).BROWN},null,8,["color"])]),_:1},8,["width","height","depth","position"]),t(e(y),{onClick:v,ref:"rightWheel-tire",width:.2,height:.4,depth:.4,position:{x:0,y:-.6,z:.75},"cast-shadow":""},{default:s(()=>[t(e(u),{color:e(M).BLACK},null,8,["color"])]),_:1},8,["width","height","depth","position"])]),_:1},8,["position"]),t(e(B),{ref:"leftWheel",position:{x:.3,y:0,z:-1.4}},{default:s(()=>[t(e(y),{onClick:v,ref:"leftWheel-base",width:.4,height:.5,depth:.6,position:{x:0,y:-.3,z:.75},"cast-shadow":""},{default:s(()=>[t(e(u),{color:e(w)},null,8,["color"])]),_:1},8,["width","height","depth","position"]),t(e(y),{onClick:v,ref:"leftWheel-nut",width:.34,height:.2,depth:.2,position:{x:0,y:-.6,z:.75},"cast-shadow":""},{default:s(()=>[t(e(u),{color:e(M).BROWN},null,8,["color"])]),_:1},8,["width","height","depth","position"]),t(e(y),{onClick:v,ref:"leftWheel-tire",width:.2,height:.4,depth:.4,position:{x:0,y:-.6,z:.75},"cast-shadow":""},{default:s(()=>[t(e(u),{color:e(M).BLACK},null,8,["color"])]),_:1},8,["width","height","depth","position"])]),_:1},8,["position"]),t(e(B),{ref:"rearWheel"},{default:s(()=>[t(e(y),{onClick:v,ref:"rearWheel-base",width:.3,height:.5,depth:.15,position:{x:0,y:-.3,z:.75},rotation:{x:-.2,y:0,z:0},"cast-shadow":""},{default:s(()=>[t(e(u),{color:e(w)},null,8,["color"])]),_:1},8,["width","height","depth","position","rotation"]),t(e(y),{onClick:v,ref:"rearWheel-nut",width:.2,height:.2,depth:.2,position:{x:0,y:-.5,z:.8},"cast-shadow":""},{default:s(()=>[t(e(u),{color:e(M).BROWN},null,8,["color"])]),_:1},8,["width","height","depth","position"]),t(e(y),{onClick:v,ref:"rearWheel-tire",width:.15,height:.4,depth:.4,position:{x:0,y:-.5,z:.8},"cast-shadow":""},{default:s(()=>[t(e(u),{color:e(M).BLACK},null,8,["color"])]),_:1},8,["width","height","depth","position"])]),_:1},512),t(e(B),{ref:"pilot"},{default:s(()=>[t(e(y),{onClick:v,ref:"body",width:.3,height:.3,depth:.3,position:{x:0,y:.4,z:0}},{default:s(()=>[t(e(u),{color:"#9d795a"})]),_:1},8,["width","height","depth","position"]),t(e(y),{onClick:v,ref:"head",width:.2,height:.2,depth:.2,position:{x:0,y:.65,z:.02}},{default:s(()=>[t(e(u),{color:"#f5dbb0"})]),_:1},8,["width","height","depth","position"]),t(e(y),{onClick:v,ref:"earRight",width:.05,height:.07,depth:.05,position:{x:.1,y:.65,z:.02}},{default:s(()=>[t(e(u),{color:"#f5dbb0"})]),_:1},8,["width","height","depth","position"]),t(e(y),{onClick:v,ref:"earLeft",width:.05,height:.07,depth:.05,position:{x:-.1,y:.65,z:.02}},{default:s(()=>[t(e(u),{color:"#f5dbb0"})]),_:1},8,["width","height","depth","position"]),t(e(y),{onClick:v,ref:"goggleStrap",width:.22,height:.02,depth:.22,position:{x:0,y:.65,z:.02}},{default:s(()=>[t(e(u),{color:"#76573c"})]),_:1},8,["width","height","depth","position"]),t(e(y),{onClick:v,ref:"goggleLeft",width:.07,height:.07,depth:.07,position:{x:.05,y:.65,z:-.07}},{default:s(()=>[t(e(u),{color:"#76573c"})]),_:1},8,["width","height","depth","position"]),t(e(y),{onClick:v,ref:"goggleRight",width:.07,height:.07,depth:.07,position:{x:-.05,y:.65,z:-.07}},{default:s(()=>[t(e(u),{color:"#76573c"})]),_:1},8,["width","height","depth","position"]),t(e(y),{onClick:v,ref:"hair1",width:.2,height:.05,depth:.2,position:{x:0,y:.775,z:.02}},{default:s(()=>[t(e(u),{color:e(M).WHITE},null,8,["color"])]),_:1},8,["width","height","depth","position"]),t(e(y),{onClick:v,ref:"hair2",width:.22,height:.05,depth:.22,position:{x:0,y:.74,z:.05}},{default:s(()=>[t(e(u),{color:e(M).WHITE},null,8,["color"])]),_:1},8,["width","height","depth","position"]),t(e(y),{onClick:v,ref_key:"lightGreen",ref:xe,width:.1,height:.1,depth:.1,position:{x:1.6,y:0,z:-.75}},{default:s(()=>[t(e(u),{color:e(M).GREEN,props:{transparent:!0,opacity:.5}},null,8,["color","props"])]),_:1},8,["width","height","depth","position"]),t(e(y),{onClick:v,ref_key:"lightRed",ref:te,width:.1,height:.1,depth:.1,position:{x:-1.6,y:0,z:-.75}},{default:s(()=>[t(e(u),{color:e(M).RED,props:{transparent:!0,opacity:.85}},null,8,["color","props"])]),_:1},8,["width","height","depth","position"]),t(e(Ke),{ref_key:"lightGreenLight",ref:_e,position:{x:1.6,y:0,z:-.8},intensity:1,color:e(M).GREEN,distance:10},null,8,["position","color"]),t(e(Ke),{ref_key:"lightRedLight",ref:V,position:{x:-1.6,y:0,z:-.8},intensity:1,color:e(M).RED,distance:10},null,8,["position","color"])]),_:1},512)]),_:1},512)]),_:1},8,["position","rotation","props"]))}},Jt={setup(a){return(n,r)=>(R(),K(e(B),null,{default:s(()=>[t(st),t(jt,{position:{x:0,y:0},altitude:1,direction:2})]),_:1}))}},eo=(a,n)=>{let r=X(0,7);return a<0?n<0?r=7:n===0?r=6:n>0&&(r=5):a===0?n<0?r=0:n>0&&(r=4):a>0&&(n<0?r=1:n===0?r=2:n>0&&(r=3)),r},to={setup(a){const n=5,r=5,m=()=>({type:"ForestTile"}),f=(c,x)=>({type:"AirportTile",direction:eo(c,x)}),l=(c,x=0)=>{const I=Math.floor(c/2),N=0-I,E=I;return{min:N+x,max:E-x}},k=l(n,1),p=l(r,1),w={x:X(k.min,k.max),y:X(p.min,p.max)},b=((c=n,x=r)=>{const I=[],N=l(x),E=l(c);for(let z=N.min;z<=N.max;z++){const F=[];for(let H=E.min;H<=E.max;H++)w.x===H&&w.y===z?F.push(f(H,z)):F.push(m());I.push(F)}return I})();return(c,x)=>(R(),K(e(B),null,{default:s(()=>[(R(!0),G(ne,null,ge(e(b),(I,N)=>(R(),G(ne,null,[(R(!0),G(ne,null,ge(I,(E,z)=>(R(),G(ne,null,[E.type==="ForestTile"?(R(),K(st,{key:0,position:{x:z-2,y:N-2}},null,8,["position"])):ue("",!0),E.type==="AirportTile"?(R(),K(e(Zt),{key:1,position:{x:z-2,y:N-2},direction:E.direction},null,8,["position","direction"])):ue("",!0)],64))),256))],64))),256))]),_:1}))}};const oo={class:"what"},io={key:0,class:"fixed top-1/2 left-1/2 bg-red-500"},no={key:0,class:"fixed bottom-20 left-1/2 transform -translate-x-1/2"},so={key:0,class:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 flex flex-col space-y-4 items-center"},ro=ee("h1",{class:"font-bold font-callout text-2xl"},"Are you sure you want to quit?",-1),ao=ee("p",null,"Your game will not be saved and you will lose all points.",-1),lo={class:"debug"},co={setup(a){const{sceneRef:n,scene:r}=Wt(),{cameraRef:m,camera:f}=Yt(),{rendererRef:l,renderer:k}=Oe(),{state:p,send:w,service:C}=Mt(Gt),b=h(!1),c=()=>b.value=!0,x=()=>b.value=!1,I=()=>{x(),C.children.get("gameMachine").send("STOP")};de(()=>{w({type:"IDLE"})}),Te(p,i=>{i.matches("start")&&(j.rotation.y=0)});const N="GrassTile",E="FarmTile",z="TrainTracksTile",F="AirportTile",H=2,ye=4,fe=2,q=4,Y=$(H,ye),Q=$(fe,q);P(()=>{const i=Math.floor(D.value%96/4),g=D.value%4*15;return`${i.toString().padStart(2,"0")}:${g.toString().padStart(2,"0")}`});const me=[];for(;me.length<Y;){const i={x:X(-5,5),y:X(-5,5),z:X(5,7)};me.find(g=>g.x===i.x&&g.y===i.y)||me.push(i)}const re=[];for(;re.length<Q;){const i={x:X(-4,4),y:X(-4,4),direction:X(0,7)};re.find(g=>g.x===i.x&&g.y===i.y)||re.push(i)}const ve=h(0),o=()=>({type:N}),Re=()=>({type:E}),W=()=>({type:z}),Le=()=>({id:"AF1",type:F,x:0,y:0,direction:0}),ke=[[o(),o(),o(),o(),o(),o(),o(),o(),o(),o(),o()],[W(),W(),W(),W(),W(),W(),W(),W(),W(),W(),W()],[o(),o(),o(),o(),o(),o(),o(),o(),o(),o(),o()],[o(),o(),Re(),o(),o(),o(),o(),o(),o(),o(),o()],[o(),o(),o(),o(),o(),o(),o(),o(),o(),o(),o()],[o(),o(),o(),o(),o(),Le(),o(),o(),o(),o(),o()],[o(),o(),o(),o(),o(),o(),o(),o(),o(),o(),o()],[o(),o(),o(),o(),o(),o(),o(),o(),o(),o(),o()],[o(),o(),o(),o(),o(),o(),o(),o(),o(),o(),o()],[o(),o(),o(),o(),o(),o(),o(),o(),o(),o(),o()],[o(),o(),o(),o(),o(),o(),o(),o(),o(),o(),o()]];console.log(ke);const be=h(),S=h(),xe=h(0),_e=[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1},{x:-1,y:0},{x:-1,y:-1}],te={FLYING:"FLYING",LANDED:"LANDED",CRASHED:"CRASHED",EXITED:"EXITED",GHOST:"GHOST"},V=h([{id:"AP1",name:"GJK-001",x:0,y:6,currentAltitude:5,finalAltitude:5,currentDirection:0,directionModifier:0,destination:"AF1",status:te.FLYING},{id:"AP2",name:"GJK-002",x:6,y:0,currentAltitude:6,finalAltitude:6,currentDirection:6,directionModifier:0,destination:"AF1",status:te.FLYING}]);h();const D=h(42),v=h(0),ze=new Rt,d=new Xe(0,1,0).normalize(),Ce=.1;ze.setFromAxisAngle(d,Ce);const Ae=(i,g)=>{if(g===0)return i;let L=i+(g<0?1:-1);return console.log(L%8),L<0?7:L%8},Ie=(i,g)=>i===g?i:i+(i>g?-1:1),ae=()=>{V.value=V.value.map(i=>Ye(T({},i),{x:i.x+_e[i.currentDirection].x,y:i.y+_e[i.currentDirection].y,currentDirection:Ae(i.currentDirection,i.directionModifier),directionModifier:i.directionModifier===0?0:i.directionModifier<0?i.directionModifier+1:i.directionModifier-1,currentAltitude:Ie(i.currentAltitude,i.finalAltitude)})).filter(i=>Math.abs(i.x)<=6&&Math.abs(i.y)<=6)},le=()=>{V.value=V.value.filter(i=>i.status===te.FLYING)},ce=()=>{V.value.forEach(i=>{const g=ke.flat().find(gt=>gt.id===i.destination),{x:L,y:ie,direction:dt}=g,{x:ht,y:ut,currentDirection:ft,currentAltitude:pt}=i;pt===0&&(ht===L&&ut===ie&&ft===dt?(i.status=te.LANDED,ve.value+=100):(i.status=te.CRASHED,ve.value-=100))})};let Z=!1;Te(D,i=>{Z=!0,console.log("Scene polycount:",l.value.renderer.info.render.triangles),console.log("Active Drawcalls:",l.value.renderer.info.render.calls),console.log("Textures in Memory",l.value.renderer.info.memory.textures),console.log("Geometries in Memory",l.value.renderer.info.memory.geometries),i%4==0&&(v.value++,le(),ae(),ce()),U.rotation.y=-i/96*Math.PI*2+Math.PI/2;let g,L;i%96>=0&&i%96<24?(g="#8d1953",L="#d95f70"):i%96>=24&&i%96<48?(g="#d95f70",L="#f7f4db"):i%96>=48&&i%96<72?(g="#f7f4db",L="#d95f70"):i%96>=72&&i%96<96&&(g="#d95f70",L="#8d1953"),S.value.light.color=new he(Ne(g,L,i%24/24)),S.value.light.intensity=.2+Math.sin(i%96/96*Math.PI*2-Math.PI/2)/10});const U=new we,j=new we;let oe,O;de(()=>{const i=new Lt(5);n.value.add(i);const g=new Ct(be.value.light);n.value.add(g);const L=new Et(S.value.light);n.value.add(L),console.log(S.value),S.value.light.shadow.camera.top=90,S.value.light.shadow.camera.bottom=-120,S.value.light.shadow.camera.left=-90,S.value.light.shadow.camera.right=90,n.value.scene.add(U),U.add(S.value.light),U.rotation.x=Math.PI/-3,U.rotation.y=-D.value/96*Math.PI*2+Math.PI/2,S.value.light.position.x=60,S.value.light.lookAt(0,0,0),S.value.light.shadow.near=.5,S.value.light.shadow.far=500;let ie=0;l.value.renderer.shadowMap.autoUpdate=!1,console.log(m.value.camera),n.value.scene.add(j),j.add(m.value.camera),Z=!0,oe=()=>{A.begin(),l.value.renderer.shadowMap.needsUpdate=Z,p.value.matches("idle")&&(j.rotation.y=ie/300),ie++},O=()=>{A.end(),Z=!1},l.value.onBeforeRender(oe),l.value.onAfterRender(O)}),Ue(()=>{l.value.offBeforeRender(oe),l.value.offAfterRender(O)});var A=new At;A.showPanel(0),document.body.appendChild(A.dom),Te(V,i=>{console.log({newPlanes:i})});const Ee=h(null);P(()=>V.value.find(i=>i.id===Ee.value)),P(()=>({"background-image":`conic-gradient(#14b8a6 0deg, #0284c7 ${D.value%4*90}deg, transparent ${D.value%4*90}deg 360deg)`})),P(()=>{let i,g,L,ie;return D.value%96>=0&&D.value%96<24?(i="#000000",g="#e14c9d",L="#2e6791",ie="#4e8fbf"):D.value%96>=24&&D.value%96<48?(i="#e14c9d",g="#ffffff",L="#4e8fbf",ie="#9bc8e9"):D.value%96>=48&&D.value%96<72?(i="#ffffff",g="#e14c9d",L="#9bc8e9",ie="#4e8fbf"):D.value%96>=72&&D.value%96<96&&(i="#e14c9d",g="#000000",L="#4e8fbf",ie="#2e6791"),`radial-gradient(${Ne(i,g,D.value%24/24)}, ${Ne(L,ie,D.value%24/24)})`});const J=11+1,Me=[];for(let i=0;i<J;i++){Me.push([]);for(let g=0;g<J;g++){const L=$(-.75,0);Me[i].push(L),g>0&&g<J-1&&Me[i].push(L)}}return(i,g)=>(R(),G("div",oo,[e(p).matches("loading")?(R(),G("div",io,"loading")):ue("",!0),t(qe,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:s(()=>[e(p).matches("idle")?(R(),G("div",no,[ee("button",{class:"rounded-md bg-gradient-to-r from-cyan-500 to-blue-500 px-10 py-3 text-white font-bold m-auto shadow-lg",onClick:g[0]||(g[0]=L=>e(w)({type:"START"}))},"Start new game")])):ue("",!0)]),_:1}),e(p).matches("start")?(R(),G("button",{key:1,class:"fixed bottom-1 left-1 rounded-md bg-gradient-to-r from-red-500 to-orange-500 px-10 py-3 text-white font-bold m-auto mt-8",onClick:c},"Quit")):ue("",!0),t(qe,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:s(()=>[e(p).matches("start")&&b.value?(R(),G("div",so,[ee("div",{class:"text-center text-red-700 bg-white rounded-lg p-10 shadow-xl bg-opacity-90"},[ro,ao,ee("div",{class:"space-x-2"},[ee("button",{class:"rounded-md bg-gradient-to-r from-red-500 to-orange-500 px-10 py-3 text-white font-bold m-auto mt-8",onClick:I},"Quit the game"),ee("button",{class:"rounded-md bg-gradient-to-r from-green-500 to-lime-500 px-10 py-3 text-white font-bold m-auto mt-8",onClick:x},"Keep playing")])])])):ue("",!0)]),_:1}),t(e(It),{ref_key:"rendererRef",ref:l,antialias:"","orbit-ctrl":{enableDamping:!0,enablePan:!1,minDistance:e(p).matches("idle")?10:20,maxDistance:e(p).matches("idle")?50:100},resize:"window",shadow:"",alpha:""},{default:s(()=>[t(e(Dt),{ref_key:"cameraRef",ref:m,position:e(p).matches("idle")?{x:10,y:6,z:10}:{x:50,y:50,z:50}},null,8,["position"]),t(e(Pt),{ref_key:"sceneRef",ref:n},{default:s(()=>[t(e(St),{ref_key:"hemiLight",ref:be,color:"#ffffff",groundColor:"#080802",intensity:.7,position:{x:15,y:25,z:15}},null,8,["intensity"]),t(e(Qe),{ref_key:"dirLight",ref:S,color:"#ffffff",intensity:.3,"cast-shadow":"",shadowMapSize:{width:2048,height:2048}},null,8,["intensity"]),t(e(Qe),{ref:"dirLight2",color:"#b0e1ed",intensity:.2,position:{x:-20,y:25,z:-20}},null,8,["intensity"]),e(p).matches("idle")?(R(),K(Jt,{key:0})):ue("",!0),e(p).matches("start")?(R(),K(to,{key:1})):ue("",!0)]),_:1},512)]),_:1},8,["orbit-ctrl"]),ee("div",lo,[ee("button",{onClick:g[1]||(g[1]=L=>Je.value=!e(Je))},"Debug"),ee("button",{onClick:g[2]||(g[2]=L=>xe.value=Math.abs(xe.value-1))},"Fly"),ee("button",{onClick:g[3]||(g[3]=L=>D.value++)},"Tick")])]))}};Tt(co).mount("#app");
