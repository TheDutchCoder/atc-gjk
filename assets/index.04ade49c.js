import{P as vs,A as ks,a as It,b as zs,c as Ms,d as we,i as Es,r as et,S as Ss,W as Is,e as Cs,O as Ps,V as Xe,f as m,C as As,M as kt,B as ft,g as O,h as U,G as q,m as D,j as v,k as Ls,l as Ts,D as Os,n as De,I as ct,E as Gs,F as Xs,T as Re,o as Wt,p as ye,w as yt,H as Ue,q as Ht,s as de,v as be,t as Ds,u as gt,x as B,y as $,z as u,J as bt,K as x,L as Rs,N as Us,Q as Ys,R as Ns,U as Zs,X as E,Y as J,Z as S,_ as Bt,$ as tt,a0 as L,a1 as W,a2 as Bs,a3 as xe,a4 as $s,a5 as Fs,a6 as Ws,a7 as Hs}from"./vendor.e674ea7a.js";const js=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=e(n);fetch(n.href,o)}};js();const X=new vs(50,window.innerWidth/window.innerHeight,1,1e3),zt=new ks;X.position.set(15,9,15);X.add(zt);var Vs="/atc-gjk/assets/background.2370a396.ogg",he="/atc-gjk/assets/click1.eb77c57b.ogg",Qs="/atc-gjk/assets/woosh.7c32c2a9.ogg",qs="/atc-gjk/assets/airplane1.6b14ecc6.ogg";const V=new It(zt),jt=new It(zt),Vt=new It(zt),ae=new It(zt),Et=new It(zt),Q=new It(zt),Ct=new zs;Ct.load(Vs,r=>{V.setBuffer(r),V.setLoop(!0),V.setVolume(0)});Ct.load(he,r=>{jt.setBuffer(r),jt.setVolume(.8)});Ct.load(he,r=>{Vt.setBuffer(r),Vt.setVolume(.8)});Ct.load(he,r=>{ae.setBuffer(r),ae.setVolume(.8)});Ct.load(Qs,r=>{Et.setBuffer(r),Et.setVolume(.2),Et.setPlaybackRate(.75)});Ct.load(qs,r=>{Q.setBuffer(r),Q.setVolume(0),Q.setLoop(!0)});const Ks=r=>{V.isPlaying||V.play(),r?(V.gain.gain.setValueAtTime(.2,V.context.currentTime),V.gain.gain.exponentialRampToValueAtTime(1e-4,V.context.currentTime+2)):(V.gain.gain.setValueAtTime(1e-4,V.context.currentTime),V.gain.gain.exponentialRampToValueAtTime(.2,V.context.currentTime+2))},Js=Ms({id:"main",initial:"loading",context:{difficulty:0,music:!1},states:{loading:{on:{INTRO_IN:"introIn"}},introIn:{tags:"intro",on:{DONE:"introIdle"}},introIdle:{tags:"intro",on:{INTRO_OUT:"introOut",TOGGLE_MUSIC:{actions:["toggleMusic"]},DIFFICULTY:{actions:["setDifficulty"]}}},introOut:{tags:"intro",on:{DONE:"gameIn"}},gameIn:{tags:"board",on:{DONE:"gamePlaying"}},gamePlaying:{tags:"board",initial:"playing",states:{playing:{on:{LOSE:"lose",WIN:"win",QUIT:"quit"}},lose:{on:{DONE:"#main.gameOut"}},win:{on:{DONE:"#main.gameOut"}},quit:{on:{DONE:"#main.gameOut",CANCEL:"playing"}}},on:{GAME_OUT:"gameOut"}},gameOut:{tags:"board",on:{DONE:"introIn"}}}},{actions:{setDifficulty:we({difficulty:r=>(r.difficulty+1)%3}),toggleMusic:we({music:r=>(Ks(r.music),!r.music)})}}),C=Es(Js).start(),R=et(C.state);C.onTransition(r=>R.value=r);const ve=new Ss,tn=()=>{const r=document.getElementById("three");r.innerHTML="",r.appendChild(pt.domElement)},pt=new Is({antialias:!0,alpha:!0,shadow:!0});pt.setSize(window.innerWidth,window.innerHeight);pt.shadowMap.enabled=!0;pt.shadowMap.type=Cs;const P=new Ps(X,pt.domElement);P.enableDamping=!0;P.enableRotate=!0;P.enableZoom=!0;P.enablePan=!1;P.autoRotate=!0;P.autoRotateSpeed=-2;const en=new Xe(0,0,0),sn=()=>{const r=P.target,t=en;new m.Tween(r).to(t,500).easing(m.Easing.Cubic.InOut).onUpdate(()=>P.target=r).start();const e={x:X.position.x,y:X.position.y,z:X.position.z},s={x:80,y:35,z:80};new m.Tween(e).to(s,500).easing(m.Easing.Cubic.InOut).onUpdate(()=>{X.position.set(e.x,e.y,e.z),P.update()}).start()},nn=new As,M=(r,t,e,s,n,o=!0)=>{[[0,11,17],[1,9,20],[2,13,19],[3,15,22],[5,10,16],[4,8,21],[7,12,18],[6,14,23]][r].forEach(i=>{let c,h,l,d=t.attributes.position.getX(i),p=t.attributes.position.getY(i),_=t.attributes.position.getZ(i);o?(c=e?d+e:d,h=s?p+s:p,l=n?_+n:_):(c=e||d,h=s||p,l=n||_),t.attributes.position.setXYZ(i,c,h,l)}),t.attributes.position.needsUpdate=!0},xt=(r,t,e)=>{const s=Math.round(Math.random()*(t*1e5-r*1e5)+r*1e5)/1e5;return e&&s>=e.min&&s<=e.max?xt(r,t,e):s},z=(r,t,e)=>{let s=Math.round(Math.random()*(t-r)+r);return s===e&&(s=z(r,t,e)),s},H=(r,t=!1)=>{const e=Math.floor(Math.random()*r.length),s=r[e];return t&&r.splice(e,1),s},Xt=(r,t,e)=>{var s=+r.replace("#","0x"),n=s>>16,o=s>>8&255,a=s&255,i=+t.replace("#","0x"),c=i>>16,h=i>>8&255,l=i&255,d=n+e*(c-n),p=o+e*(h-o),_=a+e*(l-a);return"#"+((1<<24)+(d<<16)+(p<<8)+_|0).toString(16).slice(1)},on=(r,t,e)=>{let s=[];return r.forEach((n,o)=>{n.forEach((a,i)=>{if(e){let c=!0;for(let h=0;h<t;h++)n[i+h]!==null&&(c=!1);c&&s.push({start:{x:i,y:0,z:o},end:{x:i+(t-1),y:0,z:o}})}else{let c=!0;for(let h=0;h<t;h++)(!r[o+h]||r[o+h][i]!==null)&&(c=!1);c&&s.push({start:{x:i,y:0,z:o},end:{x:i,y:0,z:o+(t-1)}})}})}),s},an=(r,t,e,s=0)=>{const n=JSON.parse(JSON.stringify(r)),o=JSON.parse(JSON.stringify(r));if(s>0&&(o.splice(-s),o.splice(0,s),o.forEach(d=>{d.splice(-s),d.splice(0,s)})),o.flat(2).every(d=>!!d))return null;const a=0-Math.floor(t/2),i=0-Math.floor(e/2);let c,h;do c=z(s,t-s-1),h=z(s,e-s-1);while(n[h][c]);return{tile:{x:c+a,y:0,z:h+i},x:c,z:h}},Ye=(r,t,e={width:0,direction:0})=>{const{width:s,direction:n}=e,o=s/2;let a,i,c=xt(r,t),h=0,l=xt(r,t);for(n===0||n==4?(a=d=>d>o||d<-o,i=()=>!0):n===3||n==7?(a=()=>!0,i=(d,p)=>p>d+o||p<d-o):n===2||n==6?(a=()=>!0,i=(d,p)=>p>o||p<-o):(n===1||n==5)&&(a=()=>!0,i=(d,p)=>p>-d+o||p<-d-o);!a(c);)c=xt(r,t);for(;!i(c,l);)l=xt(r,t);return{x:c,y:h,z:l}},Ne=(r,t,e,s=1)=>{const n=Math.ceil(0-t/2),o=Math.abs(n),a=Math.ceil(0-e/2),i=Math.abs(a),{x:c,z:h}=r;return c===n-s?h===a-s?3:h===i+s?1:2:c===o+s?h===a-s?5:h===i+s?7:6:h===a-s?4:0},rn=(r,t,e)=>{const s=Math.ceil(0-t/2),n=Math.abs(s),o=Math.ceil(0-e/2),a=Math.abs(o),{x:i,z:c}=r;return i===s-1?c===o-1?7:c===a+1?5:6:i===n+1?c===o-1?1:c===a+1?3:2:c===o-1?0:4},vt=(r,t)=>{let{x:e,y:s,z:n}=r;return t===0?n--:t===1?(e++,n--):t===2?e++:t===3?(e++,n++):t===4?n++:t===5?(e--,n++):t===6?e--:t===7&&(e--,n--),{x:e,y:s,z:n}},Ze=(r,t)=>{let{x:e,y:s,z:n}=r;return t===0?n++:t===1?(e--,n++):t===2?e--:t===3?(e--,n--):t===4?n--:t===5?(e++,n--):t===6?e++:t===7&&(e++,n++),{x:e,y:s,z:n}},ke=r=>{const t=Math.floor(r/4).toString(),e=(r%4*15).toString();return`${t.padStart(2,"0")}:${e.padStart(2,"0")}`},ln=(r,t,e)=>{const s=Math.ceil(0-r/2),n=Math.abs(s),o=2,a=e-2,i=Math.ceil(0-t/2),c=Math.abs(i),h=[s,n,0],l=[i,c],d=[i,c,0],p=H(h),_=z(o,a),g=H(p===0?l:d),f={x:p,y:_,z:g},b=Ne(f,r,t,0);return{position:f,direction:b}},ze=(r,t,e,s=[])=>{const n=s.length?Math.random()>.7:!1,o=Math.ceil(0-r/2)-1,a=Math.abs(o),i=Math.ceil(0-t/2)-1,c=Math.abs(i),h=[o,a,0],l=[i,c],d=[i,c,0],p=H(h),_=z(3,e),g=H(p===0?l:d),f={x:p,y:_,z:g};return n?Be(s):{position:f,direction:Ne(f,r,t),name:`${$e(f)}${_}`}},se=(r,t,e,s=[])=>{const n=s.length?Math.random()>.3:!1,o=Math.ceil(0-r/2)-1,a=Math.abs(o),i=Math.ceil(0-t/2)-1,c=Math.abs(i),h=[o,a,0],l=[i,c],d=[i,c,0],p=H(h),_=z(3,e),g=H(p===0?l:d),f={x:p,y:_,z:g};return n?Be(s):{position:f,direction:rn(f,r,t),name:`${$e(f)}${_}`}},Be=r=>H(r),$e=r=>{const{x:t,z:e}=r;if(t===0){if(e>0)return"S";if(e<0)return"N"}else if(t<0){if(e<0)return"NW";if(e===0)return"W";if(e>0)return"SW"}else if(t>0){if(e<0)return"NE";if(e===0)return"E";if(e>0)return"SE"}},cn=(r=0)=>{if(r===0)return{x:0,z:1};if(r===1)return{x:-1,z:1};if(r===2)return{x:-1,z:0};if(r===3)return{x:-1,z:-1};if(r===4)return{x:0,z:-1};if(r===5)return{x:1,z:-1};if(r===6)return{x:1,z:0};if(r===7)return{x:1,z:1}},Me=(r,t,e,s=0)=>{const n=(t-r)/(e-1),o=[];let a=r;for(let i=0;i<e;i++){const c=z(-s,s);o.push(Math.floor(a)+c),a+=n}return o},Fe=["EASY","NORMAL","HARD"],Ee={EASY:{width:11,depth:11},NORMAL:{width:15,depth:15},HARD:{width:21,depth:21}},Se={EASY:{min:1,max:2},NORMAL:{min:2,max:3},HARD:{min:3,max:5}},dn={EASY:2,NORMAL:3,HARD:5},$t={EASY:{count:{min:1,max:1},size:{min:2,max:2}},NORMAL:{count:{min:1,max:2},size:{min:2,max:3}},HARD:{count:{min:1,max:3},size:{min:3,max:5}}},Dt={EASY:{amount:24,height:6},NORMAL:{amount:48,height:7},HARD:{amount:96,height:8}},ne={EASY:{amount:10,height:6},NORMAL:{amount:15,height:7},HARD:{amount:20,height:8}},T={SCHEDULED:"Scheduled",APPROACHING:"Approaching",IN_FLIGHT:"In flight",OBSTRUCTED:"Obstructed",LANDED:"Landed",EXITED:"Exited",LOST:"Lost",CRASHED:"Crashed"},hn=new kt({color:10053706,flatShading:!0});class un{_tile=null;_dirt=null;constructor(){}add(t={scale:{x:1,y:1,z:1}}){this._tile=t}reset(){this._tile=null,this._dirt=null}create(){const t=new ft(10,3,10);return t.translate(0,-2.5,0),t.scale(this._tile.scale.x,this._tile.scale.y,this._tile.scale.z),this._dirt=new O(t,hn),this._dirt.scale.setScalar(0),this._dirt}animateIn(){return this._tile?new Promise(t=>{const e={scale:0},s={scale:1};this.animateUpdate(e),new m.Tween(e).to(s,500).easing(m.Easing.Elastic.InOut).onUpdate(()=>this.animateUpdate(e)).onComplete(t).delay(0).start()}):Promise.resolve()}animateOut(){return this._tile?new Promise(t=>{const e={scale:1},s={scale:0};new m.Tween(e).to(s,500).easing(m.Easing.Elastic.InOut).onUpdate(()=>this.animateUpdate(e)).onComplete(t).delay(1250).start()}):Promise.resolve()}animateUpdate(t){this._dirt.scale.setScalar(t.scale)}}const ue=new un;class qt{_position={x:0,y:0,z:0};_model=null;_hasAnimations=!1;_isAnimating=!1;_shouldBeRemoved=!1;_tick=0;displayName="";constructor({position:t={x:0,y:0,z:0}}={}){this._position=t}updatePosition(){this._model.position.x=this._position.x*10,this._model.position.y=this._position.y*5,this._model.position.z=this._position.z*10}get position(){return this._position}set position(t){this._position=t,this.updatePosition()}get model(){return this._model}set model(t){this._model=t,this.updatePosition(),this._hasAnimations}get isAnimating(){return this._isAnimating}set isAnimating(t){this._isAnimating=t}}const ie=10,pn=1,re=10,mn=new kt({color:11984276,flatShading:!0}),gn=new kt({color:10010486,flatShading:!0}),fn=r=>{const t=r.getAttribute("position");for(let e=0;e<t.count;e++){const s=new Xe;if(s.fromBufferAttribute(t,e),s.y>=.5&&s.x!==-5&&s.x!==5&&s.z!==-5&&s.z!==5){const n=.15-Math.random()*.3,o=ie/40-Math.random()*(ie/20),a=re/40-Math.random()*(re/20);t.setXYZ(e,s.x+o,s.y+n,s.z+a)}}r.attributes.position.needsUpdate=!0};class _n{_tiles=[];_grassLight=new U;_grassDark=new U;_grassAll=new q;constructor(){}add(t){this._tiles.push(t)}reset(){this._tiles=[],this._grassLight=new U,this._grassDark=new U,this._grassAll=new q}create(){const t=[],e=[];if(this._tiles.forEach(s=>{const n=new ft(10,1,10,ie,pn,re);fn(n),n.rotateY(z(0,4)*2*(-Math.PI/4)),n.translate(s.position.x*10,-.5+s.position.y*5,s.position.z*10),s.position.x&1&&s.position.z&1||!(s.position.x&1)&&!(s.position.z&1)?t.push(n):e.push(n)}),this._tiles.length){if(t.length){const s=D(t);this._grassLight=new O(s,mn),this._grassLight.receiveShadow=!0}if(e.length){const s=D(e);this._grassDark=new O(s,gn),this._grassDark.receiveShadow=!0}this._grassAll.add(this._grassLight,this._grassDark),this._grassAll.scale.setScalar(0)}return this._grassAll}animateIn(){return this._tiles.length?new Promise(t=>{const e={scale:0},s={scale:1};this.animateUpdate(e),new m.Tween(e).to(s,500).easing(m.Easing.Elastic.InOut).onUpdate(()=>this.animateUpdate(e)).onComplete(t).delay(250).start()}):Promise.resolve()}animateOut(){return this._tiles.length?new Promise(t=>{const e={scale:1},s={scale:0};new m.Tween(e).to(s,500).easing(m.Easing.Elastic.InOut).onUpdate(()=>this.animateUpdate(e)).onComplete(t).delay(1e3).start()}):Promise.resolve()}animateUpdate(t){this._grassAll.scale.setScalar(t.scale)}}const Yt=new _n,wn="#ffff00",yn=new v(11371131),bn=new v(10473352),xn=new v(9157493),vn=new v(13617032),kn=new v(13340781),We=new v(11910596),He=new v(9542564),je=new v(7964047),Ve=new v(5857641);new v(11910596);new v(9542564);new v(7964047);const zn=new v(5124632),Mn=new v(6307874),En=new v(5914664),Sn=new v(15658734);new v(16711680);new v(65280);new v(255);const In=new v(0),Cn=new v(16751104),Pn=new v(16711680),An=new v(65280),Ie=new v(11371131),Ln=new v(4251856),Tn=new v(0),On=new v(15276570),Gn=new v(8800796),Xn=new v(0),A=new kt({flatShading:!0}),oe=new kt({flatShading:!0,transparent:!0,opacity:.75}),Dn=new kt({flatShading:!0,transparent:!0,opacity:.85}),N=new ft(1,1,1),Rn=new Ls(1,10,10),Ft=new Ts(.3,2,4),Qe=new Os(1,0),Ut=new De(1,1,1,8),Un=new De(.5,1,1,8);new ft(2,.15,.2);new ft(.1,.1,10);const Yn=new ft(3,.2,9),Nn=new ft(.2,.05,.75),Ce=new ft(.2,.2,.2),Pe=[bn,xn,vn,kn],wt=new U;class Zn{_tiles=[];_trunk=null;_foliage=null;_trees=new q;_instances=[];constructor(){}add(t){this._tiles.push(t)}reset(){this._tiles=[],this._trunk=null,this._foliage=null,this._trees=new q,this._instances=[]}create(){let t=0;if(this._tiles.forEach(e=>{const s=z(20,30);t+=s;for(let n=0;n<s;n++)this._instances.push({pos:Ye(-4.75,4.75,e.exclude),rot:{x:xt(-.12,.12),y:xt(-.12,.12),z:0},scale:.5+Math.random()*.75,color:Pe[z(0,Pe.length-1)],tile:e})}),this._tiles.length){this._trunk=new ct(Ft.clone(),A,t),this._trunk.castShadow=!0;const e=Ft.clone();e.scale(1.3,1.3,1.3),e.translate(0,.5,0);const s=Ft.clone();s.scale(1.1,1.1,1.1),s.translate(0,1.1,0);const n=D([e,s]);this._foliage=new ct(n,A,t),this._foliage.castShadow=!0,this._foliage.receiveShadow=!0,this._trunk.geometry.computeBoundingBox(),this._foliage.geometry.computeBoundingBox(),this._trunk.geometry.translate(0,this._trunk.geometry.boundingBox.min.y*-1,0),this._foliage.geometry.translate(0,this._foliage.geometry.boundingBox.min.y*-1,0),this._foliage.geometry.translate(0,.3,0),this._trees.add(this._trunk,this._foliage)}return this._trees}updateInstance(t,e,s){const{pos:n,rot:o,scale:a,color:i,tile:c}=t,{x:h,y:l,z:d}=n,{x:p,y:_,z:g}=o,f=new Gs(p,_,g,"XYZ");wt.position.set(h+c.position.x*10,(l+c.position.y*5)*a,d+c.position.z*10),wt.setRotationFromEuler(f),wt.scale.set(s.x,s.y,s.z),wt.updateMatrixWorld(!0),this._trunk.setMatrixAt(e,wt.matrixWorld),this._trunk.setColorAt(e,yn),wt.updateMatrixWorld(!0),this._foliage.setMatrixAt(e,wt.matrixWorld),this._foliage.setColorAt(e,i),this._trunk.instanceMatrix.needsUpdate=!0,this._trunk.instanceColor.needsUpdate=!0,this._foliage.instanceMatrix.needsUpdate=!0,this._foliage.instanceColor.needsUpdate=!0}animateIn(){return this._tiles.length?new Promise(t=>{this._instances.forEach((e,s)=>{const{scale:n}=e,o={x:0,y:0,z:0},a={x:n,y:n,z:n};this.updateInstance(e,s,o),new m.Tween(o).to(a,500).easing(m.Easing.Elastic.Out).onUpdate(()=>this.updateInstance(e,s,o)).onComplete(t).delay(z(500,1e3)).start()})}):Promise.resolve()}animateOut(){return this._tiles.length?new Promise(t=>{this._instances.forEach((e,s)=>{const{scale:n}=e,o={x:n,y:n,z:n},a={x:0,y:0,z:0};new m.Tween(o).to(a,500).easing(m.Easing.Elastic.In).onUpdate(()=>this.updateInstance(e,s,o)).onComplete(t).delay(z(500,750)).start()})}):Promise.resolve()}}const Kt=new Zn,Ae=[We,He,je,Ve],Rt=new U;class Bn{_tiles=[];_rock=new U;_instances=[];constructor(){}add(t){this._tiles.push(t)}reset(){this._tiles=[],this._rock=new U,this._instances=[]}create(){let t=0;return this._tiles.forEach(e=>{const s=z(6,12);t+=s;for(let n=0;n<s;n++)this._instances.push({pos:Ye(-4.5,4.5,e.exclude),rot:{x:-.1+Math.random()*.2,y:Math.PI/2*Math.random(),z:-.1+Math.random()*.2},scale:.1+Math.random()*.3,color:Ae[z(0,Ae.length-1)],tile:e})}),this._tiles.length&&(this._rock=new ct(Qe,A,t),this._rock.castShadow=!0,this._rock.receiveShadow=!0),this._rock}updateInstance(t,e,s){const{pos:n,rot:o,scale:a,color:i,tile:c}=t,{x:h,y:l,z:d}=n,{x:p,y:_,z:g}=o;Rt.position.set(h+c.position.x*10,(l+c.position.y+s.y)*a,d+c.position.z*10),Rt.rotation.set(p,_,g),Rt.scale.set(s.x,s.y,s.z),Rt.updateMatrixWorld(!0),this._rock.setMatrixAt(e,Rt.matrixWorld),this._rock.setColorAt(e,i),this._rock.instanceMatrix.needsUpdate=!0,this._rock.instanceColor.needsUpdate=!0}animateIn(){return this._tiles.length?new Promise(t=>{this._instances.forEach((e,s)=>{const{scale:n}=e,o={x:0,y:0,z:0},a={x:n,y:n,z:n};this.updateInstance(e,s,o),new m.Tween(o).to(a,500).easing(m.Easing.Elastic.Out).onUpdate(()=>this.updateInstance(e,s,o)).onComplete(t).delay(z(500,1e3)).start()})}):Promise.resolve()}animateOut(){return this._tiles.length?new Promise(t=>{this._instances.forEach((e,s)=>{const{scale:n}=e,o={x:n,y:n,z:n},a={x:0,y:0,z:0};this.updateInstance(e,s,o),new m.Tween(o).to(a,500).easing(m.Easing.Elastic.In).onUpdate(()=>this.updateInstance(e,s,o)).onComplete(t).delay(z(500,750)).start()})}):Promise.resolve()}}const Nt=new Bn;class lt extends qt{constructor({position:t={x:0,y:0,z:0}}={}){super({position:t});this.create()}create(){Yt.add({position:this._position}),Kt.add({position:this._position}),Nt.add({position:this._position})}}const Le=[zn,Mn,En],rt=new U;class $n{_tiles=[];_beams=null;_rails=null;_beamInstances=[];_railInstances=[];constructor(){}add(t){this._tiles.push(t)}reset(){this._tiles=[],this._beams=null,this._rails=null,this._beamInstances=[],this._railInstances=[]}create(){const t=new q;let e=0,s=0;if(this._tiles.forEach(n=>{const a=n.direction===2||n.direction===6;e+=11;for(let i=0;i<11;i++)this._beamInstances.push({pos:{x:a?-4.6+i*10/11:0,y:0,z:a?0:-4.6+i*10/11},rot:{x:0,y:-.08+Math.random()*.16+(a?Math.PI/2:0),z:0},color:Le[z(0,Le.length-1)],tile:n});s+=2;for(let i=0;i<2;i++)this._railInstances.push({pos:{x:a?0:-.7+i*1.4,y:.2,z:a?-.7+i*1.4:0},rot:{x:0,y:a?Math.PI/2:0,z:0},color:Sn,tile:n})}),this._tiles.length){const n=N.clone();n.scale(2,.3,.3),this._beams=new ct(n,A,e),this._beams.castShadow=!0,this._beams.receiveShadow=!0;const o=N.clone();o.scale(.2,.2,10),this._rails=new ct(o,A,s),this._rails.castShadow=!0,this._rails.receiveShadow=!0,t.add(this._beams,this._rails)}return t}updateBeamInstance(t,e,s){const{pos:n,rot:o,color:a,tile:i}=t,{x:c,y:h,z:l}=n,{x:d,y:p,z:_}=o;rt.position.set(c+i.position.x*10,h+i.position.y*5,l+i.position.z*10),rt.rotation.set(d,p,_),rt.scale.set(s.x,s.y,s.z),rt.updateMatrixWorld(!0),this._beams.setMatrixAt(e,rt.matrixWorld),this._beams.setColorAt(e,a),this._beams.instanceMatrix.needsUpdate=!0,this._beams.instanceColor.needsUpdate=!0}updateRailInstance(t,e,s){const{pos:n,rot:o,color:a,tile:i}=t,{x:c,y:h,z:l}=n,{x:d,y:p,z:_}=o;rt.position.set(c+i.position.x*10,h+s.y+i.position.y*10,l+i.position.z*10),rt.rotation.set(d,p,_),rt.scale.set(s.scale,s.scale,s.scale),rt.updateMatrixWorld(!0),this._rails.setMatrixAt(e,rt.matrixWorld),this._rails.setColorAt(e,a),this._rails.instanceMatrix.needsUpdate=!0,this._rails.instanceColor.needsUpdate=!0}animateIn(){return this._tiles.length?new Promise(t=>{this._beamInstances.forEach((e,s)=>{const n={x:0,y:0,z:0},o={x:1,y:1,z:1};this.updateBeamInstance(e,s,n),new m.Tween(n).to(o,500).easing(m.Easing.Elastic.Out).onUpdate(()=>this.updateBeamInstance(e,s,n)).delay(z(750,1e3)).start()}),this._railInstances.forEach((e,s)=>{const n={y:5,scale:0},o={y:0,scale:1};this.updateRailInstance(e,s,n),new m.Tween(n).to(o,500).easing(m.Easing.Elastic.Out).onUpdate(()=>this.updateRailInstance(e,s,n)).onComplete(t).delay(z(750,1e3)).start()})}):Promise.resolve()}animateOut(){return this._tiles.length?new Promise(t=>{this._beamInstances.forEach((e,s)=>{const n={x:1,y:1,z:1},o={x:0,y:0,z:0};new m.Tween(n).to(o,500).easing(m.Easing.Elastic.In).onUpdate(()=>this.updateBeamInstance(e,s,n)).delay(z(750,1e3)).start()}),this._railInstances.forEach((e,s)=>{const n={y:0,scale:1},o={y:5,scale:0};new m.Tween(n).to(o,500).easing(m.Easing.Elastic.In).onUpdate(()=>this.updateRailInstance(e,s,n)).onComplete(t).delay(z(750,1e3)).start()})}):Promise.resolve()}}const qe=new $n;class le extends qt{_tiles=[];_direction=0;constructor({position:t={x:0,y:0,z:0},direction:e=0}={}){super({position:t});this._direction=e,this.create()}create(){Yt.add({position:this._position}),Kt.add({position:this._position,exclude:{width:3,direction:this._direction}}),Nt.add({position:this._position,exclude:{width:3,direction:this._direction}}),qe.add({position:this._position,direction:this._direction})}}var Fn="/atc-gjk/assets/helvetiker_regular.typeface.d5c54676.json",Wn="/atc-gjk/assets/helvetiker_bold.typeface.bd68159e.json";const Hn=new Xs,jn=async r=>new Promise((t,e)=>{Hn.load(r,s=>t(s),null,s=>e(s))}),Vn=[Fn,Wn],Ke=await Promise.all(Vn.map(async r=>await jn(r)));Ke[0];const Je=Ke[1],ts=A.clone();ts.color.set(In);const es=A.clone();es.color.set(Cn);const ss=A.clone();ss.color.set(An);const ns=A.clone();ns.color.set(Pn);const os=A.clone();os.color.set(wn);class Qn{_tiles=[];_airstrip=null;_strips=null;_stripes=null;_greenLightMeshes=null;_greenLights=null;_redLightMeshes=null;_redLights=null;_label=null;_tick=0;constructor(){}add(t){this._tiles.push(t)}reset(){this._tiles=[],this._airstrip=null,this._strips=null,this._stripes=null,this._greenLightMeshes=null,this._redLightMeshes=null,this._greenLights=null,this._redLights=null,this._label=null,this._tick=0}create(){this._airstrip=new q,this._greenLights=new q,this._redLights=new q;const t=[],e=[],s=[],n=[],o=[];if(this._tiles.forEach((a,i)=>{const c=Yn.clone();c.rotateY(a.direction*Math.PI/-4),c.translate(a.position.x*10,.1+a.position.y*5,a.position.z*10),t.push(c);for(let g=0;g<7;g++){const f=Nn.clone();f.translate(0,0,-3+g),f.rotateY(a.direction*Math.PI/-4),f.translate(a.position.x*10,.2+a.position.y*5,a.position.z*10),e.push(f)}for(let g=0;g<5;g++){const f=Ce.clone();f.translate(-1+g*.5,0,4),f.rotateY(a.direction*Math.PI/-4),f.translate(a.position.x*10,a.position.y*5,a.position.z*10),s.push(f);const b=Ce.clone();b.translate(-1+g*.5,0,-4),b.rotateY(a.direction*Math.PI/-4),b.translate(a.position.x*10,a.position.y*5,a.position.z*10),n.push(b)}const h=new Re(`AP${i+1}`,{font:Je,size:80,height:5,curveSegments:12,bevelEnabled:!0,bevelThickness:10,bevelSize:3,bevelOffset:0,bevelSegments:5});h.center(),h.scale(.01,.01,.01),h.translate(0,-3,0),h.rotateX(Math.PI/-2),h.rotateY(a.direction*Math.PI/-4),h.translate(a.position.x*10,.2+a.position.y*5,a.position.z*10),o.push(h);const l=new U,d=new Wt(65280,1.2,3);d.translateX(-1.5),d.translateZ(4),d.visible=!1,l.add(d),l.translateX(a.position.x*10),l.translateY(.5),l.translateZ(a.position.z*10),l.rotateY(a.direction*Math.PI/-4);const p=new U,_=new Wt(16711680,1.2,3);_.translateX(1.5),_.translateZ(-4),_.visible=!1,p.add(_,_),p.translateX(a.position.x*10),p.translateY(.5),p.translateZ(a.position.z*10),p.rotateY(a.direction*Math.PI/-4),this._greenLights.add(l),this._redLights.add(p)}),this._tiles.length){const a=D(t),i=D(e),c=D(s),h=D(n),l=D(o);this._strips=new O(a,ts),this._stripes=new O(i,es),this._greenLightMeshes=new O(c,ss),this._redLightMeshes=new O(h,ns),this._labels=new O(l,os),this._greenLightMeshes.position.y=.2,this._redLightMeshes.position.y=.2,this._airstrip.add(this._strips,this._stripes,this._greenLightMeshes,this._redLightMeshes,this._labels,this._greenLights,this._redLights)}return this._airstrip}_animate=()=>{this._greenLights&&this._greenLights.children.forEach(t=>{if(this._tick>=160){const e=this._tick%160;(e===0||e===10||e===20||e===30||e===40)&&(t.children[0].visible=!0,t.translateX(.5)),e===41&&(t.children[0].visible=!1),e===159&&(t.children[0].visible=!0,t.translateX(-2.5))}}),this._redLights&&this._redLights.children.forEach(t=>{if(this._tick>=160){const e=this._tick%160;(e===50||e===60||e===70||e===80||e===90)&&(t.children[0].visible=!0,t.translateX(.5)),e===91&&(t.children[0].visible=!1),e===49&&(t.children[0].visible=!0,t.translateX(-2.5))}}),this._tick++};animateIn(){return this._tiles.length?new Promise(t=>{const e={scale:0},s={scale:1};this.animateUpdate(e),new m.Tween(e).to(s,500).easing(m.Easing.Elastic.InOut).onUpdate(()=>this.animateUpdate(e)).onComplete(t).delay(1e3).start()}):Promise.resolve()}animateOut(){return this._tiles.length?new Promise(t=>{const e={scale:1},s={scale:0};new m.Tween(e).to(s,500).easing(m.Easing.Elastic.InOut).onUpdate(()=>this.animateUpdate(e)).onComplete(t).delay(1e3).start()}):Promise.resolve()}animateUpdate(t){this._airstrip.scale.setScalar(t.scale)}}const Qt=new Qn;class as extends qt{_tiles=[];_direction=0;constructor({position:t={x:0,y:0,z:0},direction:e=0}={}){super({position:t});this._direction=e,this.create()}create(){Yt.add({position:this._position}),Kt.add({position:this._position,exclude:{width:5.5,direction:this._direction}}),Nt.add({position:this._position,exclude:{width:5.5,direction:this._direction}}),Qt.add({position:this._position,direction:this._direction})}}const Te=[We,He,je,Ve],at=new U;class qn{_tiles=[];_clouds=new U;_animate=()=>{};_instances=[];_tick=0;_pause=!1;constructor(){}add(t){this._tiles.push(t)}reset(){this._tiles=[],this._clouds=new U,this._animate=()=>{},this._instances=[],this._tick=0}create(){let t=0;return this._tiles.forEach(e=>{const s=z(12,24);t+=s;const n=Te[z(0,Te.length-1)],o=z(5,9);for(let a=0;a<s;a++)this._instances.push({pos:{x:-4.8+Math.random()*9.6,y:-.4+Math.random()*.8,z:-4.8+Math.random()*9.6},rot:{x:Math.PI*2*Math.random(),y:Math.PI*2*Math.random(),z:Math.PI*2*Math.random()},altitude:e.position.y||o,animation:{direction:Math.random()>.5?1:-1,speed:z(200,300)},scale:.5+Math.random()*1.5,color:n,isReady:!1,tile:e})}),this._clouds=new ct(Qe,Dn,t),this._animate=()=>{this._pause||(this._instances.forEach((e,s)=>{const{isReady:n}=e;n&&this.updateInstance(e,s)}),this._tick++)},this._clouds}async next(t=0){await this.animateNext(t)}updateInstance(t,e,s){const{pos:n,rot:o,scale:a,color:i,animation:c,tile:h,altitude:l}=t,{x:d,y:p,z:_}=n,{x:g,y:f,z:b}=o,{direction:I,speed:k}=c,w=Math.sin((this._tick+e*50)/10/Math.PI)/20;at.position.set(d+h.position.x*10,l*5+(p+w)*a,_+h.position.z*10),at.rotation.set(g,f,b+this._tick/k*I),s?at.scale.set(s.x,s.y,s.z):at.scale.setScalar(a),at.updateMatrixWorld(!0),this._clouds.setMatrixAt(e,at.matrixWorld),this._clouds.setColorAt(e,i),this._clouds.instanceMatrix.needsUpdate=!0,this._clouds.instanceColor.needsUpdate=!0}updateInstancePosition(t,e,s){const{pos:n,altitude:o,scale:a,rot:i,animation:c}=t,{x:h,y:l,z:d}=i,{direction:p,speed:_}=c,g=Math.sin((this._tick+e*50)/10/Math.PI)/20;at.position.set(n.x+s.x*10,o*5+(n.y+g)*a,n.z+s.z*10),at.rotation.set(h,l,d+this._tick/_*p),at.scale.setScalar(a),at.updateMatrixWorld(!0),this._clouds.setMatrixAt(e,at.matrixWorld),this._clouds.instanceMatrix.needsUpdate=!0}animateIn(){return this._tiles.length?new Promise(t=>{this._instances.forEach((e,s)=>{const{scale:n}=e,o={x:0,y:0,z:0},a={x:n,y:n,z:n};this.updateInstance(e,s,o),new m.Tween(o).to(a,500).easing(m.Easing.Elastic.Out).onUpdate(()=>this.updateInstance(e,s,o)).onComplete(()=>{e.isReady=!0,t()}).delay(z(1e3,1250)).start()})}):Promise.resolve()}async animateNext(){return this._tiles.length?new Promise(t=>{this._pause=!0,this._instances.forEach((e,s)=>{const n=vt(e.tile.position,e.tile.direction),o=e.tile.position,a=n;this.updateInstancePosition(e,s,o),new m.Tween(o).to(a,500).easing(m.Easing.Cubic.InOut).onUpdate(()=>this.updateInstancePosition(e,s,o)).onComplete(()=>{this._pause=!1,t()}).delay(z(250,500)).start()})}):Promise.resolve()}animateOut(){return this._tiles.length?new Promise(t=>{this._instances.forEach((e,s)=>{const{scale:n}=e,o={x:n,y:n,z:n},a={x:0,y:0,z:0};this.updateInstance(e,s,o),new m.Tween(o).to(a,500).easing(m.Easing.Elastic.In).onStart(()=>e.isReady=!1).onUpdate(()=>this.updateInstance(e,s,o)).onComplete(t).delay(z(250,500)).start()})}):Promise.resolve()}}const St=new qn,Kn=new v(16777215),Jn=r=>{const t=N.clone();t.scale(1,1,2),M(0,t,-.2,-.1),M(2,t,-.2,.3),M(4,t,.2,-.1),M(6,t,.2,.3);const e=N.clone();e.scale(3,.1,1),M(1,e,.2,.05),M(3,e,.2,-.05),M(5,e,-.2,.05),M(7,e,-.2,-.05);const s=N.clone();s.scale(.1,.75,.5),s.translate(0,.5,.95),M(0,s,-.04,.05),M(2,s,-.04),M(3,s,0,-.05),M(4,s,.04,.05),M(6,s,.04),M(7,s,0,-.05);const n=N.clone();n.scale(.4,.5,.6);const o=n.clone();o.translate(0,-.3,.6),o.rotateX(-.2);const a=n.clone();a.translate(.3,-.3,-.65);const i=n.clone();i.translate(-.3,-.3,-.65);const c=D([t,e,s,o,a,i]),h=N.clone();h.scale(.7,.4,.05),h.translate(0,.5,-.7),h.rotateX(.2),M(0,h,-.05),M(1,h,-.05),M(4,h,.05),M(5,h,.05);const l=D([h]),d=N.clone();d.scale(1,1,.5),d.translate(0,0,-1.25),M(1,d,-.1,-.1),M(3,d,-.1,.1),M(5,d,.1,-.1),M(7,d,.1,.1);const p=N.clone();p.scale(.1,.1,.5),M(2,p,null,null,.01),M(1,p,null,null,-.009),M(3,p,null,null,-.009),M(7,p,null,null,-.01);const _=p.clone();_.rotateZ(Math.PI/4),_.rotateY(.2),_.translate(.5,.2,-1.05);const g=p.clone();g.rotateZ(Math.PI/4),g.translate(.55,.2,-.55);const f=p.clone();f.rotateZ(Math.PI/4)+Math.PI/2,f.rotateY(-.2),f.translate(-.5,.2,-1.05);const b=p.clone();b.rotateZ(Math.PI/4),b.translate(-.55,.2,-.55);const I=D([d,_,g,f,b]),k=N.clone();k.scale(.2,.2,.2),k.translate(0,0,-1.55),M(0,k,.07,.07),M(2,k,.07,-.07),M(4,k,-.07,.07),M(6,k,-.07,-.07);const w=N.clone();w.scale(.2,.4,.4);const y=w.clone();y.translate(0,-.6,.6),y.rotateX(-.2);const F=w.clone();F.translate(-.3,-.6,-.65);const st=w.clone();st.translate(.3,-.6,-.65);const mt=D([k,y,F,st]),j=N.clone();j.scale(.15,1.5,.05),j.translate(0,0,-1.6);const K=j.clone();K.rotateZ(Math.PI/2);const Pt=D([j,K]),Mt=N.clone();Mt.scale(.34,.2,.2);const At=Mt.clone();At.translate(0,-.6,.6),At.rotateX(-.2);const Y=Mt.clone();Y.translate(-.3,-.6,-.65);const Z=Mt.clone();Z.translate(.3,-.6,-.65);const it=D([At,Y,Z]),dt=Ft.clone();dt.scale(1.2,.42,1.2),dt.rotateX(Math.PI),dt.translate(0,2,0);const nt=D([dt]),_t=N.clone();_t.scale(.1,.1,.1),_t.translate(1.7,0,-.5);const Lt=N.clone();Lt.scale(.1,.1,.1),Lt.translate(-1.7,0,-.5);const Tt=new q;Tt.name="plane";const ot=A.clone();ot.color.set(r),ot.name="base";const Jt=oe.clone(),Zt=A.clone(),pe=A.clone(),te=A.clone(),me=A.clone(),ge=oe.clone(),fe=oe.clone(),ls=new v(14872564),cs=new v(0),ds=new v(10053706),hs=new v(16777215),us=new v(65280),ps=new v(65280),ms=new v(16711680);Jt.color.set(ls),Zt.color.set(hs),pe.color.set(ds),te.color.set(cs),me.color.set(us),ge.color.set(ps),fe.color.set(ms);const gs=new O(c,ot),fs=new O(l,Jt),_s=new O(I,Zt),ws=new O(mt,te),_e=new O(Pt,te);_e.name="props";const ys=new O(it,pe),ee=new O(nt,me);ee.name="selector",ee.visible=!1;const bs=new O(_t,ge),xs=new O(Lt,fe),Ot=new Wt(65280,1.2,3);Ot.name="green",Ot.translateX(1.7),Ot.translateY(0),Ot.translateZ(-.6);const Gt=new Wt(16711680,1.2,3);return Gt.name="red",Gt.translateX(-1.7),Gt.translateY(0),Gt.translateZ(-.6),Tt.add(gs,fs,_s,ws,_e,ys,ee,bs,xs,Ot,Gt),Tt};class is{_startTime=0;_position={x:0,y:0,z:0};_direction=0;_targetAltitude=0;_targetDirection=0;_start=null;_end=null;_spawned=!1;_takenOff=!1;_landed=!1;_isGhost=!1;_isSelected=!1;_name="";_id=null;_color=null;_model=null;_tick=0;_fuel=0;_flightStatus=T.SCHEDULED;constructor(t){const{id:e,start:s,end:n,fuel:o,startTime:a}=t;return this._start=s,this._end=n,this._position=s.position,this._direction=s.direction,this._targetAltitude=this._position.y||1,this._takenOff=this._position.y!==0,this._id=e,this._name="GJK",this._color=new v(Math.random()*16777215),this._fuel=o,this._startTime=a,this.create(),this}animate=()=>this.animateIdle();updateAnimation(t){this._model.position.x=t.position.x*10,this._model.position.y=t.position.y*5,this._model.position.z=t.position.z*10,this._model.scale.setScalar(t.scale)}animateIn(t=1250,e=500){return new Promise(s=>{const{_position:n,_direction:o}=this;let a,i;this._takenOff?(a={position:Ze({...n},o),direction:o,scale:0},i={position:{...n},direction:o,scale:1}):(a={position:{...n},direction:o,scale:0},i={position:{...n},direction:o,scale:1},a.position.y=.18,i.position.y=.18),this.updateAnimation(a),new m.Tween(a).to(i,e).easing(m.Easing.Elastic.Out).onUpdate(()=>this.updateAnimation(a)).onComplete(s).delay(t).start()})}animateOut(t=0,e=500){return new Promise(s=>{const{_position:n,_direction:o}=this,a={position:{x:this._model.position.x/10,y:this._model.position.y/5,z:this._model.position.z/10},direction:this._direction,scale:1},i={position:vt(n,o),direction:this._direction,scale:0};this.updateAnimation(a),new m.Tween(a).to(i,e).easing(m.Easing.Elastic.In).onUpdate(()=>this.updateAnimation(a)).onComplete(s).delay(t).start()})}animateIdle(){const t=Math.sin(this._tick/10/Math.PI)/100,e=Math.sin(this._tick/15/Math.PI)/10,s=Math.sin(this._tick/20/Math.PI)/20;this._position.y>=1&&(this._model.position.y+=t,this._model.rotation.z=e,this._model.rotation.x=s),this._model.children.forEach(n=>{n.name==="props"&&(n.rotation.z+=.3),n.name==="selector"&&(n.rotation.y+=.01,n.position.y+=t),n.name==="green"&&(this._tick%120===0&&(n.visible=!0),this._tick%120===4&&(n.visible=!1)),n.name==="red"&&(this._tick%120===40&&(n.visible=!0),this._tick%120===44&&(n.visible=!1))}),this._tick++}create(){const t=Jn(this._color);t.position.x=this._position.x*10,t.position.z=this._position.z*10,t.position.y=this._position.y*5,t.rotation.y=this._direction*(Math.PI/-4),this._takenOff||t.rotateX(.1),t._id=this._id,this._model=t}async next(t=0,e=1){const s=vt(this._position,this._direction);let n=0,o=0;this._targetAltitude>this._position.y?n=1:this._targetAltitude<this._position.y&&(n=-1),this._targetDirection>0?(this._targetDirection--,o=1):this._targetDirection<0&&(this._targetDirection++,o=-1),await this.animateNext(n,o,t,e,this._takenOff?0:.1),this.unsetGhost(),this._takenOff=!0,this._flightStatus=T.IN_FLIGHT,s.y+=n,this._position=s,this._direction=(8+(this._direction+o))%8,this._model.rotation.y=this._direction*(Math.PI/-4),this._fuel-=1}async animateNext(t,e,s=0,n=1){return new Promise(o=>{const a={position:{x:this._model.position.x/10,y:this._model.position.y/5,z:this._model.position.z/10},direction:this._model.rotation.y,scale:n},i=vt(this._position,this._direction);i.y+=t,i.y===0&&(i.y=.18);const c={position:i,direction:this._model.rotation.y+e*Math.PI/-4,scale:1};new m.Tween(a).to(c,500).easing(m.Easing.Cubic.InOut).onUpdate(()=>this.updateAnimation(a,this._targetDirection>0)).onComplete(o).delay(s).start()})}setGhost(){this._isGhost=!0,this._model.children.forEach(t=>{t.material&&t.material.name==="base"&&t.material.color.set(Kn),t.material&&t.material.name!=="selector"&&(t.material.transparent=!0,t.material.opacity=.75,t.material.needsUpdate=!0)})}unsetGhost(){this._isGhost=!1,this._model.children.forEach(t=>{t.material&&t.material.name==="base"&&t.material.color.set(this._color),t.material&&t.material.name!=="selector"&&(t.material.transparent=!1,t.material.opacity=1,t.material.needsUpdate=!0)})}setSpawned(){this._spawned=!0,this._flightStatus=T.APPROACHING}setExited(){this._flightStatus=T.EXITED}setLanded(){this._flightStatus=T.LANDED}setLost(){this._flightStatus=T.LOST}setCrashed(){this._flightStatus=T.CRASHED}setSelected(){this._isSelected=!0,this._model.children.forEach(t=>{t.name==="selector"&&(t.visible=!0)})}unsetSelected(){this._isSelected=!1,this._model.children.forEach(t=>{t.name==="selector"&&(t.visible=!1)})}setHeight(t){this._targetAltitude=t}setDirection(t){this._targetDirection=t}}const to=new kt({color:16711680,flatShading:!0});class eo{_tiles=[];_labels=new q;constructor(){}add(t={position:{x:1,y:1,z:1},direction:0,text:"N"}){this._tiles.push(t)}reset(){this._tiles=[]}create(){return this._tiles.forEach(t=>{const e=new Re(t.text,{font:Je,size:80,height:5,curveSegments:12,bevelEnabled:!0,bevelThickness:10,bevelSize:3,bevelOffset:0,bevelSegments:5});e.center(),e.scale(.03,.03,.03),e.rotateX(Math.PI/-2),e.rotateY(t.direction*Math.PI/-4),e.translate(t.position.x*10,-.5+t.position.y*5,t.position.z*10),this._labels.add(new O(e,to))}),this._labels}animateIn(){return this._tiles.length?new Promise(t=>{const e={scale:0},s={scale:1};this.animateUpdate(e),new m.Tween(e).to(s,500).easing(m.Easing.Elastic.InOut).onUpdate(()=>this.animateUpdate(e)).onComplete(t).delay(0).start()}):Promise.resolve()}animateOut(){return this._tiles.length?new Promise(t=>{const e={scale:1},s={scale:0};new m.Tween(e).to(s,500).easing(m.Easing.Elastic.InOut).onUpdate(()=>this.animateUpdate(e)).onComplete(t).delay(1250).start()}):Promise.resolve()}animateUpdate(t){this._labels.scale.setScalar(t.scale)}}const ut=new eo,ht=new U;class so{_tiles=[];_pole=null;_beam=null;_pegs=null;_lines=null;_powerline=new q;_poleInstances=[];_beamInstances=[];constructor(){}add(t){this._tiles.push(t)}reset(){this._tiles=[],this._pole=null,this._beam=null,this._pegs=null,this._lines=null,this._powerline=new q,this._poleInstances=[]}create(){const t=[],e=[];if(this._tiles.forEach(s=>{const n=s.direction===2||s.direction===6;this._poleInstances.push({pos:{x:0,y:0,z:0},rot:{x:0,y:n?Math.PI/2:0,z:0},scale:1,tile:s})}),this._tiles.length){this._pole=new ct(Un.clone(),A,this._tiles.length),this._pole.geometry.scale(.25,10,.25),this._pole.geometry.computeBoundingBox(),this._pole.geometry.translate(0,this._pole.geometry.boundingBox.min.y*-1,0),this._pole.castShadow=!0,this._beam=new ct(N.clone(),A,this._tiles.length),this._beam.geometry.scale(3,.2,.2),this._beam.geometry.computeBoundingBox(),this._beam.geometry.translate(0,this._beam.geometry.boundingBox.min.y*-1,0),this._beam.geometry.translate(0,9,0),this._beam.castShadow=!0;for(let o=0;o<4;o++){const a=Ut.clone();a.scale(.15,.5,.15),a.translate(-1.2+o*.8,0,0),a.translate(0,9.45,0),t.push(a);const i=N.clone();i.scale(.1,10,.1),i.rotateX(Math.PI/2),i.translate(-1.2+o*.8,0,0),i.translate(0,9.45,0),e.push(i)}const s=D(t),n=D(e);this._pegs=new ct(s,A,4),this._lines=new ct(n,A,4),this._powerline.add(this._pole,this._beam,this._pegs,this._lines)}return this._powerline}updateInstance(t,e,s){const{pos:n,rot:o,scale:a,tile:i}=t,{x:c,y:h,z:l}=n,{x:d,y:p,z:_}=o;ht.position.set(c+i.position.x*10,(h+i.position.y*5)*a,l+i.position.z*10),ht.rotation.set(d,p,_),ht.scale.set(s.x,s.y,s.z),ht.updateMatrixWorld(!0),this._pole.setMatrixAt(e,ht.matrixWorld),this._pole.setColorAt(e,Ie),this._beam.setMatrixAt(e,ht.matrixWorld),this._beam.setColorAt(e,Ie),this._pegs.setMatrixAt(e,ht.matrixWorld),this._pegs.setColorAt(e,Ln),this._lines.setMatrixAt(e,ht.matrixWorld),this._lines.setColorAt(e,Tn),ht.updateMatrixWorld(!0),this._pole.instanceMatrix.needsUpdate=!0,this._pole.instanceColor.needsUpdate=!0,this._beam.instanceMatrix.needsUpdate=!0,this._beam.instanceColor.needsUpdate=!0,this._pegs.instanceMatrix.needsUpdate=!0,this._pegs.instanceColor.needsUpdate=!0,this._lines.instanceMatrix.needsUpdate=!0,this._lines.instanceColor.needsUpdate=!0}animateIn(){return this._tiles.length?new Promise(t=>{this._poleInstances.forEach((e,s)=>{const{scale:n}=e,o={x:0,y:0,z:0},a={x:n,y:n,z:n};this.updateInstance(e,s,o),new m.Tween(o).to(a,500).easing(m.Easing.Elastic.Out).onUpdate(()=>this.updateInstance(e,s,o)).onComplete(t).delay(z(500,1e3)).start()})}):Promise.resolve()}animateOut(){return this._tiles.length?new Promise(t=>{this._poleInstances.forEach((e,s)=>{const{scale:n}=e,o={x:n,y:n,z:n},a={x:0,y:0,z:0};new m.Tween(o).to(a,500).easing(m.Easing.Elastic.In).onUpdate(()=>this.updateInstance(e,s,o)).onComplete(t).delay(z(500,750)).start()})}):Promise.resolve()}}const ce=new so,Oe=r=>{r.dispose();for(const t of Object.keys(r)){const e=r[t];e&&typeof e=="object"&&"minFilter"in e&&e.dispose()}};class rs{_scene=null;_anims=[];_lights=[];_models=[];_fog=null;_elements=[ut,ue,Yt,Kt,Nt,St,Qt,qe,ce];_airplanes=et([]);_balloons=et([]);_clouds=St;_powerlines=ce;_board=null;_tick=et(-1);_tickWatcher=null;_isAnimating=!1;_score=et(0);_animate=()=>{St._animate(),Qt._animate(),this._airplanes.value.forEach(t=>t?.animate()),this._balloons.value.forEach(t=>t?.animate())};constructor(){this._scene=new ye,this._tickWatcher=yt(this._tick,t=>{t>=96&&(C.send("WIN"),this._tickWatcher())})}addLight(t){this._lights.push(t)}addFog(t){this._fog=t}addBoard(t){this._board=t}addAirplane(t){this._airplanes.value.push(t),this._scene.add(t._model)}addBalloon(t){this._balloons.value.push(t),this._scene.add(t._model)}removeAirplane(t){this._airplanes.value=this._airplanes.value.filter(s=>s._id!==t._id);const e=this._scene.getObjectById(t._model.id);this._scene.remove(e)}reset(){this._scene.traverse(t=>{if(!!t.isMesh)if(t.geometry.dispose(),t.material.isMaterial)Oe(t.material);else for(const e of t.material)Oe(e)}),this._scene=new ye,this._board=null,this._anims=[],this._lights=[],this._models=[],this._fog=null,this._clouds=null,this._powerlines=null,this._airplanes.value=[],this._balloons.value=[],this._tick.value=-1,this._score.value=0,this._elements.forEach(t=>t.reset())}async animateIn(){return await Promise.all([...this._elements,...this._airplanes.value,...this._balloons.value].map(t=>t.animateIn())),Promise.resolve()}async animateOut(){return await Promise.all([...this._elements,...this._airplanes.value,...this._balloons.value].map(t=>t.animateOut())),Promise.resolve()}render(){this._scene.fog=this._fog,this._lights.forEach(t=>{this._scene.add(t)}),this._elements.forEach(t=>this._scene.add(t.create()))}}const no=[lt,le,as],oo=H(no);class ao extends rs{start=()=>{const t=new Ue(16777215,526338,.7);t.position.set(15,25,15);const e=new U;e.rotation.x=Math.PI/-3;const s=new Ht(16777215,.3);e.add(s),s.position.set(60,0,0),s.lookAt(e.position),s.castShadow=!0,s.shadow.mapSize.width=2048,s.shadow.mapSize.height=2048,s.shadow.camera.near=.5,s.shadow.camera.far=500,s.shadow.camera.top=90,s.shadow.camera.bottom=-120,s.shadow.camera.left=-90,s.shadow.camera.right=90,e.rotation.y=Math.PI/-1.5;const n=new Ht(11592173,.2);n.position.set(-20,25,-10),this.addLight(t),this.addLight(e),this.addLight(n),new oo({position:{x:0,y:0,z:0},direction:2});const o=new is({id:0,start:{position:{x:0,y:1,z:0},direction:1,name:""},end:{position:{x:0,y:0,z:0},direction:1,name:""},fuel:100});this.addAirplane(o),ue.add(),St.add({position:{x:0,y:2,z:0}});const a=new de(new v(10209513),15,30);this.addFog(a);const i=new U;i.position.y=2.5,P.target=i.position}}class Ge extends qt{_tiles=[];_direction=0;constructor({position:t={x:0,y:0,z:0},direction:e=0}={}){super({position:t});this._direction=e,this.create()}create(){Yt.add({position:this._position}),Nt.add({position:this._position}),ce.add({position:this._position,direction:this._direction})}}const io=()=>{const r=Rn.clone();r.scale(1.25,1.25,1.25),r.translate(0,.75,0);const t=D([r]),e=N.clone();e.scale(.75,.6,.75),e.translate(0,-2,0),M(0,e,.1,0,.1),M(1,e,.1,0,-.1),M(4,e,-.1,0,.1),M(5,e,-.1,0,-.1);const s=D([e]),n=Ut.clone();n.scale(.03,2,.03),n.translate(.65,-.8,.65),n.rotateX(.15),n.rotateZ(-.15);const o=Ut.clone();o.scale(.03,2,.03),o.translate(-.65,-.8,.65),o.rotateX(.15),o.rotateZ(.15);const a=Ut.clone();a.scale(.03,2,.03),a.translate(-.65,-.8,-.65),a.rotateX(-.15),a.rotateZ(.15);const i=Ut.clone();i.scale(.03,2,.03),i.translate(.65,-.8,-.65),i.rotateX(-.15),i.rotateZ(-.15);const c=D([n,o,a,i]),h=new q;h.name="balloon";const l=A.clone();l.color.set(On),l.name="base";const d=A.clone();d.color.set(Gn),d.name="basket";const p=A.clone();p.color.set(Xn),p.name="basket";const _=new O(t,l),g=new O(s,d),f=new O(c,p);return h.add(_,g,f),h};class ro{_startTime=0;_position={x:0,y:0,z:0};_direction=0;_start=null;_id=null;_color=null;_model=null;_tick=0;constructor(t){const{id:e,start:s,startTime:n}=t;return this._start=s,this._position=s.position,this._direction=s.direction,this._id=e,this._color=new v(Math.random()*16777215),this._startTime=n,this.create(),this}animate=()=>this.animateIdle();updateAnimation(t){this._model.position.x=t.position.x*10,this._model.position.y=t.position.y*5,this._model.position.z=t.position.z*10,this._model.scale.setScalar(t.scale)}animateIn(t=1250,e=500){return new Promise(s=>{const{_position:n,_direction:o}=this,a={position:Ze({...n},o),direction:o,scale:0},i={position:{...n},direction:o,scale:1};this.updateAnimation(a),new m.Tween(a).to(i,e).easing(m.Easing.Elastic.Out).onUpdate(()=>this.updateAnimation(a)).onComplete(s).delay(t).start()})}animateOut(t=0,e=500){return new Promise(s=>{const{_position:n,_direction:o}=this,a={position:{x:this._model.position.x/10,y:this._model.position.y/5,z:this._model.position.z/10},direction:o,scale:1},i={position:vt(n,o),direction:o,scale:0};this.updateAnimation(a),new m.Tween(a).to(i,e).easing(m.Easing.Elastic.In).onUpdate(()=>this.updateAnimation(a)).onComplete(s).delay(t).start()})}animateIdle(){const t=Math.sin(this._tick/10/Math.PI)/200;this._model.position.y+=t,this._tick++}create(){const t=io(this._color);t.position.x=this._position.x*10,t.position.z=this._position.z*10,t.position.y=this._position.y*5,t.rotation.y=this._direction*(Math.PI/-4),t._id=this._id,this._model=t}async next(t=0,e=1){const s=vt(this._position,this._direction);console.log(this._position,s),await this.animateNext(t,e),this._position=s}async animateNext(t=0,e=1){return new Promise(s=>{const n={position:{x:this._model.position.x/10,y:this._model.position.y/5,z:this._model.position.z/10},direction:this._model.rotation.y,scale:e},a={position:vt(this._position,this._direction),direction:this._direction,scale:1};new m.Tween(n).to(a,500).easing(m.Easing.Cubic.InOut).onUpdate(()=>this.updateAnimation(n)).onComplete(s).delay(t).start()})}}class lo{_width=0;_depth=0;_difficulty=null;_airfields=0;_clouds=0;_airplanes=0;_balloons=0;_airplanesQueue=[];_balloonsQueue=[];_tiles=[];_tick=0;constructor(t=1){this._difficulty=Fe[t],this._width=Ee[this._difficulty].width,this._depth=Ee[this._difficulty].depth,this._airfields=z(Se[this._difficulty].min,Se[this._difficulty].max),this._clouds=z($t[this._difficulty].count.min,$t[this._difficulty].count.max),this._airplanes=Dt[this._difficulty].amount,this._balloons=ne[this._difficulty].amount}generate(){const t=Math.ceil(0-this._width/2),e=Math.ceil(0-this._depth/2),s=Math.abs(t),n=Math.abs(e);this._tiles=Array.from({length:this._depth},()=>Array.from({length:this._width},()=>null));const o=Math.random()>.5,a=H(o?[0,1,this._depth-1,this._depth-2]:[0,1,this._width-1,this._width-2]);o?this._tiles[a].forEach((g,f)=>{this._tiles[a][f]=new le({position:{x:f+t,y:0,z:a+e},direction:2})}):this._tiles.forEach((g,f)=>{this._tiles[f][a]=new le({position:{x:a+t,y:0,z:f+e}})});const i=[];for(let g=0;g<this._airfields;g++){const f=an(this._tiles,this._width,this._depth,3);if(f){const{x:b,z:I,tile:k}=f,w={position:k,direction:z(0,7),name:`AP${i.length+1}`};i.push(w),this._tiles[I][b]=new as(w),this._tiles[I-1][b-1]=new lt({position:{x:b+t-1,y:0,z:I+e-1}}),this._tiles[I-1][b]=new lt({position:{x:b+t,y:0,z:I+e-1}}),this._tiles[I-1][b+1]=new lt({position:{x:b+t+1,y:0,z:I+e-1}}),this._tiles[I][b-1]=new lt({position:{x:b+t-1,y:0,z:I+e}}),this._tiles[I][b+1]=new lt({position:{x:b+t+1,y:0,z:I+e}}),this._tiles[I+1][b-1]=new lt({position:{x:b+t-1,y:0,z:I+e+1}}),this._tiles[I+1][b]=new lt({position:{x:b+t,y:0,z:I+e+1}}),this._tiles[I+1][b+1]=new lt({position:{x:b+t+1,y:0,z:I+e+1}})}}const c=Math.random()>.5,h=dn[this._difficulty],l=on(this._tiles,h,c),d=H(l);console.log(d);for(let g=0;g<h;g++)c?this._tiles[d.start.z][d.start.x+1]=new Ge({position:{x:d.start.x+t+g,y:0,z:d.start.z+e},direction:2}):this._tiles[d.start.z+g][d.start.x]=new Ge({position:{x:d.start.x+t,y:0,z:d.start.z+e+g},direction:0});this._tiles.forEach((g,f)=>{g.forEach((b,I)=>{if(!b)return new lt({position:{x:I+t,y:0,z:f+e}})})}),ue.add({scale:{x:this._width,y:1,z:this._depth}});for(let g=0;g<this._clouds;g++){const f=z($t[this._difficulty].size.min,$t[this._difficulty].size.max),b=ln(this._width,this._depth,Dt[this._difficulty].height);for(let I=0;I<f;I++)for(let k=0;k<f;k++)St.add({position:{x:b.position.x+I,y:b.position.y,z:b.position.z+k},direction:b.direction})}const p=Me(2,96-(this._width+4),this._balloons,2);for(let g=0;g<this._balloons;g++){let f=ze(this._width,this._depth,ne[this._difficulty].height),b=se(this._width,this._depth,ne[this._difficulty].height);b.position.y=f.position.y,this._balloonsQueue.push(new ro({id:be(),start:f,startTime:p[g]}))}console.log(p,this._balloonsQueue);const _=Me(2,96-(this._width+4),this._airplanes,2);for(let g=0;g<this._airplanes;g++){const f=ze(this._width,this._depth,Dt[this._difficulty].height,i);let b=se(this._width,this._depth,Dt[this._difficulty].height,i);for(;f.name===b.name;)b=se(this._width,this._depth,Dt[this._difficulty].height,i);this._airplanesQueue.push(new is({id:be(),start:f,end:b,startTime:_[g],fuel:z(20,35)}))}ut.add({position:{x:0,y:0,z:e-2},direction:0,text:"N"}),ut.add({position:{x:s+1,y:0,z:e-1},direction:1,text:"NE"}),ut.add({position:{x:s+2,y:0,z:0},direction:2,text:"E"}),ut.add({position:{x:s+1,y:0,z:n+1},direction:3,text:"SE"}),ut.add({position:{x:0,y:0,z:n+2},direction:4,text:"S"}),ut.add({position:{x:t-1,y:0,z:n+1},direction:5,text:"SW"}),ut.add({position:{x:t-2,y:0,z:0},direction:6,text:"W"}),ut.add({position:{x:t-1,y:0,z:e-1},direction:7,text:"NW"}),this._airplanesQueue.sort((g,f)=>g._startTime<f._startTime?-1:g._startTime>f._startTime?1:0)}}class co extends rs{start(){const t=new Ue(16777215,526338,.7);t.name="hemi",t.position.set(15,25,15);const e=new U;e.name="sun";const s=new Ht(16777215,.3);e.add(s),s.position.set(0,60,0),s.castShadow=!0,s.shadow.mapSize.width=2048,s.shadow.mapSize.height=2048,s.shadow.camera.near=.5,s.shadow.camera.far=500,s.shadow.camera.top=90,s.shadow.camera.bottom=-120,s.shadow.camera.left=-90,s.shadow.camera.right=90;const n=new Ht(11592173,.2);s.name="sunlight",n.position.set(-20,25,-10);const o=new U;o.position.y=2.5,P.target=o.position,this.addLight(t),this.addLight(e),this.addLight(n);const a=new de(new v(10209513),15,350);e.rotation.x=Math.PI/4,e.rotation.z=Math.PI;const i=new lo(C.state.context.difficulty);i.generate(),this.addFog(a),this.addBoard(i),this.nextTick()}async nextTick(){if(!this._isAnimating){this._isAnimating=!0,this._tick.value++,this._airplanes.value=this._airplanes.value.filter(a=>{if(a._flightStatus===T.LANDED||a._flightStatus===T.EXITED||a._flightStatus===T.LOST)this.removeAirplane(a);else return a});const t=Promise.all(this._airplanes.value.map(a=>a.next()));let e;this._tick.value%4===0&&(e=await Promise.all(this._balloons.value.map(a=>a.next())));const s=Promise.all(this._board._balloonsQueue.filter(a=>a._startTime===this._tick.value).map(a=>(this.addBalloon(a),a.animateIn(0,500)))),n=Promise.all(this._board._airplanesQueue.filter(a=>a._startTime===this._tick.value).map(a=>(this.addAirplane(a),a.setSpawned(),a.setGhost(),a.animateIn(0,500)))),o=new Promise(a=>{const i=this._lights.find(l=>l.name==="sun"),c={rot:i.rotation.z},h={rot:i.rotation.z+Math.PI*2*(1/96)};new m.Tween(c).to(h,500).easing(m.Easing.Quadratic.InOut).onUpdate(()=>i.rotation.z=c.rot).onComplete(a).start()});this._tick.value%Math.floor(96/this._board._width)===0&&this._tick.value>0&&await this._clouds.next(),await t,e&&await e,await n,await s,await o,this.checkObstructions(),this.checkCollisions(),this.checkDestinations(),this.checkOutOfBounds(),this.checkOutOfFuel(),this._isAnimating=!1}}checkObstructions(){const t=0-Math.floor(this._board._width/2),e=0-Math.floor(this._board._depth/2),s=Math.abs(t),n=Math.abs(e);this._airplanes.value.forEach(o=>{const{x:a,y:i,z:c}=o._position;let h=!1,l=!1;St._tiles.forEach(d=>{const{x:p,y:_,z:g}=d.position;p===a&&_===i&&g===c&&(h=!0)}),(a<t||a>s||c<e||c>n)&&(l=!0),(h||l)&&o.setGhost()})}checkCollisions(){this._airplanes.value.forEach(t=>{const{x:e,y:s,z:n}=t._position;t._takenOff&&(s===0&&Qt._tiles.forEach(o=>{const{x:a,y:i,z:c}=o.position;e===a&&n===c&&t._direction===o.direction?console.log("plane landed on airport, check if it's the right airport!"):(console.log(`plane crashed at ${a}, ${i}, ${c}`),C.send("LOSE"))}),this._airplanes.value.forEach(o=>{if(t._id!==o._id){const{x:a,y:i,z:c}=o._position;e===a&&s===i&&n===c&&C.send("LOSE")}}),this._powerlines._tiles.forEach(o=>{const{position:{x:a,z:i}}=o;e===a&&n===i&&s<=2&&C.send("LOSE")}),this._balloons.value.forEach(o=>{const{x:a,y:i,z:c}=o._position;e===a&&s===i&&n===c&&C.send("LOSE")}))})}checkDestinations(){this._airplanes.value.forEach(t=>{if(t._takenOff){const{x:e,y:s,z:n}=t._position,o=t._direction,{position:{x:a,y:i,z:c},direction:h}=t._end;e===a&&s===i&&n===c&&o===h?(this._score.value+=100+t._fuel*10,t.setGhost(),s===0?t.setLanded():t.setExited()):s===0&&(console.log("game over!"),t.setCrashed(),C.send("LOSE"))}})}checkOutOfBounds(){this._airplanes.value.forEach(t=>{const{x:e,z:s}=t._position,n=0-Math.ceil(this._board._width/2),o=0-Math.ceil(this._board._depth/2),a=Math.abs(n),i=Math.abs(o);(e<=n||e>=a||s<=o||s>=i)&&t._flightStatus!==T.APPROACHING&&t._startTime<this._tick.value&&(this._score.value-=500,t.setLost())})}checkOutOfFuel(){this._airplanes.value.forEach(t=>{t._fuel<=0&&(console.log("game over!"),C.send("LOSE"))})}selectPlane(t){this._airplanes.value.forEach(e=>{if(e._id===t&&e._isSelected){e.unsetSelected();return}e.unsetSelected(),e._id===t&&!e._isGhost&&e.setSelected()})}}const G={props:{size:{type:String,default:"md"},isDisabled:{type:Boolean,default:!1},isPrimary:{type:Boolean,default:!1},isSecondary:{type:Boolean,default:!1}},setup(r){const t=r,{size:e,isDisabled:s,isPrimary:n,isSecondary:o}=Ds(t),a=gt(()=>{switch(e.value){case"control":return["w-7 min-h-7"];case"xs":return[];case"md":default:return[]}}),i=gt(()=>{const d=["blur-[2px]",!n.value&&!o.value&&"bg-gray-800",s.value&&"bg-gray-600",n.value&&!s.value&&"bg-blue-800",o.value&&!s.value&&"bg-blue-600"];switch(e.value){case"control":return[...d,"rounded-sm translate-y-[1px] group-active:translate-y-[0px] group-hover:translate-y-[2px]"];case"xs":return[...d,"rounded translate-y-[2px] group-active:translate-y-[1px] group-hover:translate-y-[4px]"];case"sm":return[...d,"rounded translate-y-[2px] group-active:translate-y-[1px] group-hover:translate-y-[4px]"];case"md":default:return[...d,"rounded translate-y-[2px] group-active:translate-y-[1px] group-hover:translate-y-[4px]"]}}),c=gt(()=>{const d=[!n.value&&!o.value&&"group-hover:bg-gray-300",s.value&&"bg-gray-400",s.value&&o.value&&"bg-gray-500",s.value&&n.value&&"bg-gray-600",n.value&&!s.value&&"bg-blue-800 group-hover:bg-blue-900",o.value&&!s.value&&"bg-blue-400 group-hover:bg-blue-500"];switch(e.value){case"control":return[...d,"w-7 min-h-7 p-[2px] rounded-sm"];case"xs":return[...d,"py-1 px-1 rounded"];case"sm":return[...d,"py-2 px-5 rounded"];case"md":default:return[...d,"py-3 px-7 rounded"];case"lg":return[...d,"py-4 px-8 rounded"]}}),h=gt(()=>{const d=[!n.value&&!o.value&&!s.value&&"text-gray-800 group-hover:bg-gray-100",s.value&&"bg-gray-200 border-gray-300 text-gray-400 cursor-not-allowed",s.value&&o.value&&"bg-gray-300 border-gray-400 text-gray-500 cursor-not-allowed",s.value&&n.value&&"bg-gray-400 border-gray-500 text-gray-600 cursor-not-allowed",n.value&&!s.value&&"bg-blue-500 border-blue-700 text-white group-hover:bg-blue-600",o.value&&!s.value&&"bg-blue-200 border-blue-300 text-blue-700 group-hover:bg-blue-300"];switch(e.value){case"control":return[...d,!s.value&&"group-active:-translate-y-[0px] group-hover:-translate-y-[3px]","absolute inset-0 border rounded-sm text-xs -translate-y-[1px]"];case"xs":return[...d,!s.value&&"group-active:-translate-y-[0px] group-hover:-translate-y-[6px]","py-1 px-1 text-xs rounded -translate-y-[4px] group-active:-translate-y-[2px] group-hover:-translate-y-[6px]"];case"sm":return[...d,!s.value&&"group-active:-translate-y-[0px] group-hover:-translate-y-[6px]","py-2 px-5 text-sm rounded -translate-y-[4px] group-active:-translate-y-[2px] group-hover:-translate-y-[6px]"];case"md":default:return[...d,!s.value&&"group-active:-translate-y-[0px] group-hover:-translate-y-[6px]","py-2 px-7 text-sm rounded -translate-y-[4px] group-active:-translate-y-[2px] group-hover:-translate-y-[6px]"];case"lg":return[...d,!s.value&&"group-active:-translate-y-[0px] group-hover:-translate-y-[6px]","py-3 px-8 text-xl rounded -translate-y-[4px] group-active:-translate-y-[2px] group-hover:-translate-y-[6px]"]}}),l=()=>{switch(e.value){case"lg":jt.play();break;case"md":Vt.play();break;case"control":ae.play();break;default:Vt.play()}};return(d,p)=>(B(),$("button",{class:bt(["relative group select-none",x(a)]),onClick:p[0]||(p[0]=_=>l())},[u("span",{class:bt(["absolute inset-0 bg-opacity-50 transition-transform transform",x(i)])},null,2),u("span",{class:bt(["absolute inset-0 bg-gray-200",x(c)])},null,2),u("span",{class:bt(["flex justify-center items-center bg-white font-bold transition-all transform",x(h)])},[Rs(d.$slots,"default")],2)],2))}};const ho=u("div",{id:"three"},null,-1),uo={key:0,class:"absolute top-32 left-1/2 transform -translate-x-1/2"},po=u("h1",{class:"font-callout text-6xl stage"},[u("div",{class:"layer"}),u("div",{class:"layer"}),u("div",{class:"layer"}),u("div",{class:"layer"}),u("div",{class:"layer"}),u("div",{class:"layer"}),u("div",{class:"layer"}),u("div",{class:"layer"}),u("div",{class:"layer"}),u("div",{class:"layer"}),u("div",{class:"layer"}),u("div",{class:"layer"}),u("div",{class:"layer"}),u("div",{class:"layer"}),u("div",{class:"layer"}),u("div",{class:"layer"}),u("div",{class:"layer"}),u("div",{class:"layer"}),u("div",{class:"layer"}),u("div",{class:"layer"}),u("span",{class:"opacity-0"},"Air Traffic Control")],-1),mo=[po],go={key:0,class:"fixed bottom-1/4 left-1/2 transform -translate-x-1/2"},fo=L(" New Game "),_o={key:0,class:"fixed top-3 right-2"},wo={key:0,class:"fixed top-3 left-2"},yo={key:0,class:"fixed top-2 left-1/2 transform -translate-x-1/2 bg-white rounded shadow-block origin-top"},bo={class:"pt-2 pb-3 px-4 text-center text-sm"},xo=u("div",{class:"font-bold text-gray-800"}," Score ",-1),vo={key:0,class:"fixed top-2 right-2 text-xs font-bold origin-top-right"},ko={class:"absolute -bottom-16 left-1/2 w-16 transform -translate-x-1/2 bg-white pt-2 pb-3 px-3 rounded shadow-block text-center"},zo=u("div",{class:"font-bold text-sm"}," Time ",-1),Mo={class:"text-blue-500"},Eo={key:0,class:"fixed bottom-2 right-2 w-80 bg-white rounded shadow-block origin-bottom-right"},So={class:"p-2 pb-3 text-center"},Io=u("div",{class:"font-bold text-sm text-gray-800"}," Flight Schedule ",-1),Co={class:"space-y-1 max-h-48 overflow-auto mt-2"},Po={class:"text-sm font-bold w-full"},Ao=u("thead",null,[u("tr",{class:"sticky top-0 bg-white bg-opacity-80"},[u("th",{class:"font-bold text-sm text-gray-700"}," Time "),u("th",{class:"font-bold text-sm text-gray-700"}," Status "),u("th",{class:"font-bold text-sm text-gray-700"}," Entry "),u("th",{class:"font-bold text-sm text-gray-700"}," Exit "),u("th",{class:"font-bold text-sm text-gray-700"}," Fuel ")])],-1),Lo={class:"text-xs"},To=["onClick"],Oo={class:"py-1"},Go={class:"py-1"},Xo={class:"py-1"},Do={class:"py-1"},Ro={class:"py-1"},Uo={key:0,class:"fixed top-3 left-2 origin-top-left"},Yo=L(" Quit "),No={class:"fixed bottom-2 left-2 bg-white rounded shadow-block origin-bottom-left"},Zo={class:"p-2 pb-3 text-center"},Bo=u("div",{class:"font-bold text-sm text-gray-800"}," Flight Controls ",-1),$o={class:"flex"},Fo={class:"p-2 space-y-1"},Wo=u("div",{class:"font-bold text-sm text-gray-700"}," Direction ",-1),Ho={class:"grid grid-cols-3 gap-1"},jo=L(" 45 "),Vo=L(" \u2191 "),Qo=L(" 45 "),qo=L(" 90 "),Ko=L(" 90 "),Jo=L(" 135 "),ta=L(" L "),ea=L(" 135 "),sa=L(" 180 "),na=L(" \u221E "),oa=L(" 180 "),aa={class:"p-2 space-y-1"},ia=u("div",{class:"font-bold text-sm text-gray-700"}," Altitude ",-1),ra={class:"grid grid-cols-3 gap-1"},la={key:0,class:"fixed z-50 inset-0 flex items-center justify-center"},ca={class:"relative z-10 p-6 pb-7 rounded bg-white shadow-block"},da=u("h2",{class:"text-base font-bold"}," Are you sure you want to quit? ",-1),ha={class:"flex space-x-4 items-center justify-center mt-6"},ua=L(" No "),pa=L(" Yes "),ma={key:0,class:"fixed z-50 inset-0 flex items-center justify-center"},ga=u("div",{class:"absolute inset-0 bg-blue-300 bg-opacity-80"},null,-1),fa={class:"relative z-10 p-6 pb-7 rounded bg-white shadow-block"},_a=u("h2",{class:"text-base font-bold"}," You lost! ",-1),wa={class:"flex space-x-4 items-center justify-center mt-6"},ya=L(" Admit Defeat "),ba={key:0,class:"fixed z-50 inset-0 flex items-center justify-center"},xa=u("div",{class:"absolute inset-0 bg-blue-300 bg-opacity-80"},null,-1),va={class:"relative z-10 p-6 pb-7 rounded bg-white shadow-block text-center"},ka={class:"text-base font-bold"},za={class:"mt-2 text-sm"},Ma=L(" You scored a total of "),Ea=L(" points. "),Sa={class:"flex space-x-4 items-center justify-center mt-6"},Ia={setup(r){Us(k=>({"62fc9aa2":x(I)}));let t=null,e=null;const s=et([]),n=gt(()=>ke(e._tick.value)),o=gt(()=>e._score.value),a=(k,w)=>{const y=k._id===l.value?._id,F=k._flightStatus===T.IN_FLIGHT,st=[k._flightStatus===T.APPROACHING&&"bg-blue-200 text-blue-400 cursor-not-allowed",k._flightStatus===T.SCHEDULED&&"text-gray-400 cursor-not-allowed",k._flightStatus===T.LANDED&&"bg-teal-100 text-teal-500 cursor-not-allowed",k._flightStatus===T.EXITED&&"bg-teal-100 text-teal-500 cursor-not-allowed",k._flightStatus===T.LOST&&"bg-rose-100 text-rose-400 cursor-not-allowed"],mt=["bg-blue-500 text-white hover:bg-blue-600 border-b-2 border-blue-800"],j=[!y&&w%2===0&&"bg-gray-100",!y&&"hover:bg-gray-200"];return[...y?[]:st,...y?mt:[],...F?j:[]]},i=et("#ecfeff"),c=et("#7dd3fc");Ys(()=>{tn(),P.autoRotate=!1,P.enablePan=!0;let k,w,y;C.onTransition(async Y=>{if(Y.changed&&Y.matches("introIn")&&(P.autoRotate=!0,t=new ao,t.start(),t.render(),await t.animateIn(),C.send("DONE")),Y.changed&&Y.matches("introOut")&&(P.enableRotate=!1,P.autoRotate=!1,await t.animateOut(),C.send("DONE")),Y.changed&&Y.matches("gameIn")){t.reset(),e=new co,k=yt(e._tick,it=>{clearInterval(f.value),g.value=0,f.value=setInterval(()=>{g.value++},1e3);const dt=it/96,nt=Math.sin(dt*Math.PI);i.value=Xt("#4a6263","#ecfeff",nt),c.value=Xt("#1d3743","#7dd3fc",nt);const _t=Xt("#1d3743","#9bc8e9",nt),Lt=Xt("#1d3743","#9bc8e9",nt),Tt=Xt("#c09db2","#f4efd4",nt);e._scene.fog=new de(new v(_t),15,350),e._scene.children.forEach(ot=>{ot.name==="hemi"&&(ot.color=new v(Lt)),ot.name==="sun"&&(ot.children[0].color=new v(Tt))}),s.value=e._board._airplanesQueue.map(ot=>e._airplanes.value.find(Zt=>Zt._id===ot._id)||ot)}),e.start(),e.render();const Z=X.position;new m.Tween(Z).to({x:80,y:35,z:80},1500).easing(m.Easing.Cubic.InOut).onUpdate(()=>X.position.set(Z.x,Z.y,Z.z)).onComplete(()=>{P.enableRotate=!0,P.enableZoom=!0,C.send("DONE")}).start(),await e.animateIn()}if(Y.changed&&Y.matches("gamePlaying")&&(P.enableRotate=!0,w=yt(e._airplanes,Z=>{Z.find(it=>it._id===l.value?._id)||(l.value=null)}),y=yt(s,Z=>{Z.every(it=>it._flightStatus===T.LANDED||it._flightStatus===T.EXITED||it._flightStatus===T.LOST)&&C.send("WIN")})),Y.changed&&Y.matches("gameOut")){P.enableRotate=!1;const Z=X.position;new m.Tween(Z).to({x:15,y:9,z:15},1500).easing(m.Easing.Cubic.InOut).onUpdate(()=>X.position.set(Z.x,Z.y,Z.z)).onComplete(()=>{P.enableRotate=!0,P.enableZoom=!0,C.send("DONE")}).delay(500).start(),await e.animateOut(),e.reset(),i.value="#ecfeff",c.value="#7dd3fc",k(),w(),y()}});let F=0,st=1/60;const mt=new Ns,j=new Zs;let K=!1;const Pt=Y=>{K=!0,j.x=Y.clientX/window.innerWidth*2-1,j.y=-(Y.clientY/window.innerHeight)*2+1},Mt=()=>{K=!1};pt.setAnimationLoop(async Y=>{if(F+=nn.getDelta(),ve.begin(),C.state.hasTag("intro")&&t?._scene)pt.render(t._scene,X),F>st&&t._animate();else if(C.state.hasTag("board")&&e?._scene){if(K){mt.setFromCamera(j,X);const dt=mt.intersectObjects(e._scene.children).sort((nt,_t)=>nt.distance<_t.distance).find(nt=>nt.object.parent.name==="plane");dt&&(d(dt.object.parent),K=!1)}pt.render(e._scene,X),F>st&&e._animate()}P.update(),m.update(Y),ve.end(),F=F%st});const At=()=>{X.aspect=window.innerWidth/window.innerHeight,X.updateProjectionMatrix(),pt.setSize(window.innerWidth,window.innerHeight)};window.addEventListener("resize",At,!1),window.addEventListener("mousedown",Pt),window.addEventListener("mouseup",Mt),C.send("INTRO_IN")});const h=async()=>{jt.play(),await e.nextTick()};et(!1);const l=et(null);yt(l,k=>{k||sn()});const d=k=>{if(Et.isPlaying&&Et.stop(),Et.play(),Q.isPlaying||Q.play(),Q.gain.gain.setValueAtTime(1e-4,Q.context.currentTime),Q.gain.gain.exponentialRampToValueAtTime(.15,Q.context.currentTime+.75),e.selectPlane(k._id),l.value=e._airplanes.value.find(w=>w._isSelected),l.value){const w=P.target,y=l.value._model.position;new m.Tween(w).to(y,500).easing(m.Easing.Cubic.InOut).onUpdate(()=>P.target=w).start();const{x:F,y:st,z:mt}=l.value._model.position,j=cn(l.value._direction),K={x:X.position.x,y:X.position.y,z:X.position.z},Pt={x:F+20*j.x,y:st+10,z:mt+20*j.z};new m.Tween(K).to(Pt,500).easing(m.Easing.Cubic.InOut).onUpdate(()=>{X.position.set(K.x,K.y,K.z),P.update()}).start()}else Q.gain.gain.setValueAtTime(.15,Q.context.currentTime),Q.gain.gain.exponentialRampToValueAtTime(1e-4,Q.context.currentTime+1.5)},p=k=>{l.value&&!l.value._isGhost&&l.value.setHeight(k)},_=k=>{l.value&&!l.value._isGhost&&l.value.setDirection(k)},g=et(0),f=et(null);yt(g,async k=>{k===30&&await e.nextTick()}),yt(R,k=>{(k.matches("gamePlaying.lose")||k.matches("gamePlaying.win")||k.matches("gameOut"))&&clearInterval(f.value)});const b=gt(()=>({background:`conic-gradient(#3b82f6 ${g.value/30*360}deg, transparent ${g.value/30*360}deg)`})),I=gt(()=>`radial-gradient(${i.value}, ${c.value})`);return(k,w)=>(B(),$(Bt,null,[ho,u("div",null,[E(J,{"enter-active-class":"transition duration-500 ease-[cubic-bezier(.75,-0.4,.25,1.4)]","enter-from-class":"scale-50 opacity-0","enter-to-class":"scale-100 opacity-100","leave-active-class":"transition duration-500 ease-in","leave-from-class":"scale-100 opacity-100","leave-to-class":"scale-95 opacity-0"},{default:S(()=>[x(R).matches("introIdle")?(B(),$("div",uo,mo)):tt("",!0)]),_:1}),E(J,{"enter-active-class":"transition duration-500 ease-[cubic-bezier(.75,-0.4,.25,1.4)] delay-100","enter-from-class":"scale-50 opacity-0","enter-to-class":"scale-100 opacity-100","leave-active-class":"transition duration-500 ease-in delay-200","leave-from-class":"scale-100 opacity-100","leave-to-class":"scale-95 opacity-0"},{default:S(()=>[x(R).matches("introIdle")?(B(),$("div",go,[E(G,{size:"lg",onClick:w[0]||(w[0]=y=>x(C).send("INTRO_OUT"))},{default:S(()=>[fo]),_:1})])):tt("",!0)]),_:1}),E(J,{"enter-active-class":"transition duration-500 ease-[cubic-bezier(.75,-0.4,.25,1.4)] delay-200","enter-from-class":"scale-50 opacity-0","enter-to-class":"scale-100 opacity-100","leave-active-class":"transition duration-500 ease-in delay-200","leave-from-class":"scale-100 opacity-100","leave-to-class":"scale-95 opacity-0"},{default:S(()=>[x(R).matches("introIdle")?(B(),$("div",_o,[E(G,{"is-secondary":x(R).context.difficulty===1,"is-primary":x(R).context.difficulty===2,onClick:w[1]||(w[1]=y=>x(C).send("DIFFICULTY"))},{default:S(()=>[L(W(x(Fe)[x(R).context.difficulty]),1)]),_:1},8,["is-secondary","is-primary"])])):tt("",!0)]),_:1}),E(J,{"enter-active-class":"transition duration-500 ease-[cubic-bezier(.75,-0.4,.25,1.4)] delay-300","enter-from-class":"scale-50 opacity-0","enter-to-class":"scale-100 opacity-100","leave-active-class":"transition duration-500 ease-in delay-100","leave-from-class":"scale-100 opacity-100","leave-to-class":"scale-95 opacity-0"},{default:S(()=>[x(R).matches("introIdle")?(B(),$("div",wo,[E(G,{onClick:w[2]||(w[2]=y=>x(C).send("TOGGLE_MUSIC"))},{default:S(()=>[L(" Music: "+W(x(R).context.music?"on":"off"),1)]),_:1})])):tt("",!0)]),_:1}),x(R).hasTag("board")?(B(),$(Bt,{key:0},[E(J,{"enter-active-class":"transition duration-200 ease-in-out delay-100","enter-from-class":"transform scale-50 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-200 ease-in-out delay-300","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-50 opacity-0"},{default:S(()=>[x(R).matches("gamePlaying")?(B(),$("div",yo,[u("div",bo,[xo,u("div",{class:bt(["font-bold",x(o)<0?"text-rose-500":x(o)>0?"text-green-500":"text-blue-500"])},W(x(o)),3)])])):tt("",!0)]),_:1}),E(J,{"enter-active-class":"transition duration-200 ease-in-out delay-200","enter-from-class":"transform scale-50 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-200 ease-in-out delay-200","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-50 opacity-0"},{default:S(()=>[x(R).matches("gamePlaying")?(B(),$("div",vo,[u("div",{class:"flex justify-center items-center rounded-full w-16 h-16 shadow-block bg-white cursor-pointer transform hover:bg-blue-200 transition-colors",onClick:h},[u("div",{class:"rounded-full w-16 h-16 border-2 border-white",style:Bs(x(b))},null,4)]),u("div",ko,[zo,u("div",Mo,W(x(n)),1)])])):tt("",!0)]),_:1}),E(J,{"enter-active-class":"transition duration-200 ease-in-out delay-300","enter-from-class":"transform scale-50 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-200 ease-in-out delay-100","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-50 opacity-0"},{default:S(()=>[x(R).matches("gamePlaying")?(B(),$("div",Eo,[u("div",So,[Io,u("div",Co,[u("table",Po,[Ao,u("tbody",Lo,[(B(!0),$(Bt,null,xe(s.value,(y,F)=>(B(),$("tr",{key:y._id,class:bt(["transition-colors cursor-pointer",a(y,F)]),onClick:st=>y._flightStatus===x(T).IN_FLIGHT?d(y):null},[u("td",Oo,W(x(ke)(y._startTime)),1),u("td",Go,W(y._flightStatus),1),u("td",Xo,W(y._start.name),1),u("td",Do,W(y._end.name),1),u("td",Ro,W(y._fuel),1)],10,To))),128))])])])])])):tt("",!0)]),_:1}),E(J,{"enter-active-class":"transition duration-200 ease-in-out delay-[400ms]","enter-from-class":"transform scale-50 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-200 ease-in-out","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-50 opacity-0"},{default:S(()=>[x(R).matches("gamePlaying")?(B(),$("div",Uo,[E(G,{onClick:w[3]||(w[3]=y=>x(C).send("QUIT"))},{default:S(()=>[Yo]),_:1})])):tt("",!0)]),_:1}),E(J,{"enter-active-class":"transition duration-200 ease-in-out","enter-from-class":"transform scale-50 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-200 ease-in-out","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-50 opacity-0"},{default:S(()=>[$s(u("div",No,[u("div",Zo,[Bo,u("div",$o,[u("div",Fo,[Wo,u("div",Ho,[E(G,{size:"control","is-primary":l.value?._targetDirection===-1,"is-disabled":l.value?._isGhost,onClick:w[4]||(w[4]=y=>_(-1))},{default:S(()=>[jo]),_:1},8,["is-primary","is-disabled"]),E(G,{size:"control",class:"row-span-2","is-primary":l.value?._targetDirection===0&&l.value?._targetAltitude!==0,"is-disabled":l.value?._isGhost,onClick:w[5]||(w[5]=y=>{_(0),p(l.value?._position.y)})},{default:S(()=>[Vo]),_:1},8,["is-primary","is-disabled"]),E(G,{size:"control","is-primary":l.value?._targetDirection===1,"is-disabled":l.value?._isGhost,onClick:w[6]||(w[6]=y=>_(1))},{default:S(()=>[Qo]),_:1},8,["is-primary","is-disabled"]),E(G,{size:"control","is-primary":l.value?._targetDirection===-2,"is-disabled":l.value?._isGhost,onClick:w[7]||(w[7]=y=>_(-2))},{default:S(()=>[qo]),_:1},8,["is-primary","is-disabled"]),E(G,{size:"control","is-primary":l.value?._targetDirection===2,"is-disabled":l.value?._isGhost,onClick:w[8]||(w[8]=y=>_(2))},{default:S(()=>[Ko]),_:1},8,["is-primary","is-disabled"]),E(G,{size:"control","is-primary":l.value?._targetDirection===-3,"is-disabled":l.value?._isGhost,onClick:w[9]||(w[9]=y=>_(-3))},{default:S(()=>[Jo]),_:1},8,["is-primary","is-disabled"]),E(G,{size:"control","is-primary":l.value?._targetDirection===0&&l.value?._targetAltitude===0,"is-disabled":l.value?._isGhost,onClick:w[10]||(w[10]=y=>{_(0),p(0)})},{default:S(()=>[ta]),_:1},8,["is-primary","is-disabled"]),E(G,{size:"control","is-primary":l.value?._targetDirection===3,"is-disabled":l.value?._isGhost,onClick:w[11]||(w[11]=y=>_(3))},{default:S(()=>[ea]),_:1},8,["is-primary","is-disabled"]),E(G,{size:"control","is-primary":l.value?._targetDirection===-4,"is-disabled":l.value?._isGhost,onClick:w[12]||(w[12]=y=>_(-4))},{default:S(()=>[sa]),_:1},8,["is-primary","is-disabled"]),E(G,{size:"control","is-disabled":""},{default:S(()=>[na]),_:1}),E(G,{size:"control","is-primary":l.value?._targetDirection===4,"is-disabled":l.value?._isGhost,onClick:w[13]||(w[13]=y=>_(4))},{default:S(()=>[oa]),_:1},8,["is-primary","is-disabled"])])]),u("div",aa,[ia,u("div",ra,[(B(),$(Bt,null,xe([0,1,2,3,4,5,6,7,8],y=>E(G,{key:y,size:"control","is-secondary":l.value?._position.y===y&&l.value?._targetAltitude!==y,"is-primary":l.value?._targetAltitude===y,"is-disabled":l.value?._isGhost,onClick:F=>p(y)},{default:S(()=>[L(W(y),1)]),_:2},1032,["is-secondary","is-primary","is-disabled","onClick"])),64))])])])])],512),[[Fs,x(R).matches("gamePlaying")&&l.value]])]),_:1}),E(J,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:S(()=>[x(R).matches("gamePlaying.quit")?(B(),$("div",la,[u("div",{class:"absolute inset-0 bg-blue-300 bg-opacity-80",onClick:w[14]||(w[14]=Ws(y=>x(C).send("CANCEL"),["self"]))}),u("div",ca,[da,u("div",ha,[E(G,{size:"sm","is-secondary":"",onClick:w[15]||(w[15]=y=>x(C).send("CANCEL"))},{default:S(()=>[ua]),_:1}),E(G,{size:"sm","is-primary":"",onClick:w[16]||(w[16]=y=>x(C).send("DONE"))},{default:S(()=>[pa]),_:1})])])])):tt("",!0)]),_:1}),E(J,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:S(()=>[x(R).matches("gamePlaying.lose")?(B(),$("div",ma,[ga,u("div",fa,[_a,u("div",wa,[E(G,{size:"sm","is-primary":""},{default:S(()=>[ya]),_:1})])])])):tt("",!0)]),_:1}),E(J,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:S(()=>[x(R).matches("gamePlaying.win")?(B(),$("div",ba,[xa,u("div",va,[u("h2",ka," You won"+W(x(o)<0?" (sort of)":"")+"! "+W(x(o)<0?"\u{1F605}":"\u{1F389}"),1),u("p",za,[Ma,u("span",{class:bt(["font-bold",x(o)<0?"text-rose-500":x(o)>0?"text-green-500":"text-blue-500"])},W(x(o)),3),Ea]),u("div",Sa,[E(G,{size:"sm","is-primary":"",onClick:w[17]||(w[17]=y=>x(C).send("DONE"))},{default:S(()=>[L(" Nice"+W(x(o)<0?"-ish":"")+"! ",1)]),_:1})])])])):tt("",!0)]),_:1})],64)):tt("",!0)])],64))}};Hs(Ia).mount("#app");
